<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ« Day 15: Blueberry Muffin â€” Cooking English Custom</title>
<link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;500;700&family=Quicksand:wght@400;500;600;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
<style>
:root {
  --primary: #E8792F;
  --primary-light: #FDF0E6;
  --primary-dark: #C45A1A;
  --navy: #1B3A5C;
  --blue: #2E75B6;
  --blue-light: #D6E8F7;
  --green: #4CAF50;
  --green-light: #E8F5E9;
  --purple: #7B1FA2;
  --purple-light: #F3E5F5;
  --listening-color: #00897B;
  --listening-light: #E0F2F1;
  --bg: #FAFAF7;
  --card-bg: #FFFFFF;
  --text: #333333;
  --text-light: #666666;
  --border: #E8E5DF;
  --shadow: 0 2px 12px rgba(27,58,92,0.08);
  --shadow-hover: 0 4px 20px rgba(27,58,92,0.14);
  --radius: 16px;
  --radius-sm: 10px;
  --yamada-bg: linear-gradient(135deg, #FFF5F5 0%, #FFF0F5 50%, #F5F0FF 100%);
  --yamada-border: #E8B4B8;
  --yamada-accent: #C2185B;
  --pronun-color: #E65100;
  --pronun-light: #FFF3E0;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: 'Noto Sans JP', 'Zen Maru Gothic', sans-serif;
  background: var(--bg);
  color: var(--text);
  line-height: 1.8;
  min-height: 100vh;
}

.header {
  background: linear-gradient(135deg, var(--navy) 0%, #2A5080 100%);
  color: white;
  padding: 2rem 1.5rem 1.5rem;
  text-align: center;
  position: relative;
  overflow: hidden;
}
.header::before {
  content: '';
  position: absolute;
  top: -50%;
  right: -20%;
  width: 300px;
  height: 300px;
  background: radial-gradient(circle, rgba(232,121,47,0.15) 0%, transparent 70%);
  border-radius: 50%;
}
.header-badge {
  display: inline-block;
  background: rgba(255,255,255,0.15);
  backdrop-filter: blur(10px);
  padding: 0.3rem 1rem;
  border-radius: 20px;
  font-size: 0.75rem;
  font-family: 'Quicksand', sans-serif;
  font-weight: 600;
  letter-spacing: 0.05em;
  margin-bottom: 0.8rem;
  border: 1px solid rgba(255,255,255,0.2);
}
.header h1 {
  font-family: 'Quicksand', sans-serif;
  font-size: 2rem;
  font-weight: 700;
  margin-bottom: 0.3rem;
}
.header p { font-size: 0.85rem; opacity: 0.8; }

.progress-bar {
  background: white;
  padding: 1rem 1.5rem;
  border-bottom: 1px solid var(--border);
  position: sticky;
  top: 0;
  z-index: 100;
  box-shadow: 0 2px 8px rgba(0,0,0,0.04);
}
.progress-dots { display: flex; gap: 4px; justify-content: center; align-items: center; }
.progress-dot {
  width: 28px; height: 6px; border-radius: 3px;
  background: var(--border); transition: all 0.3s; cursor: pointer;
}
.progress-dot.active { background: var(--primary); }
.progress-dot.complete { background: var(--green); }
.progress-label {
  text-align: center; font-size: 0.7rem; color: var(--text-light);
  margin-top: 0.4rem; font-family: 'Quicksand', sans-serif; font-weight: 600;
}

.main { max-width: 640px; margin: 0 auto; padding: 1rem 1rem 4rem; }

.section-card {
  background: var(--card-bg); border-radius: var(--radius);
  margin-bottom: 1.2rem; box-shadow: var(--shadow);
  overflow: hidden; border: 1px solid var(--border);
  transition: box-shadow 0.3s;
  animation: fadeIn 0.4s ease both;
}
.section-card:hover { box-shadow: var(--shadow-hover); }
.section-card:nth-child(1) { animation-delay: 0.05s; }
.section-card:nth-child(2) { animation-delay: 0.1s; }
.section-card:nth-child(3) { animation-delay: 0.15s; }
.section-card:nth-child(4) { animation-delay: 0.2s; }
.section-card:nth-child(5) { animation-delay: 0.25s; }
.section-card:nth-child(6) { animation-delay: 0.3s; }
.section-card:nth-child(7) { animation-delay: 0.35s; }
.section-card:nth-child(8) { animation-delay: 0.4s; }
.section-card:nth-child(9) { animation-delay: 0.45s; }
.section-card:nth-child(10) { animation-delay: 0.5s; }

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

.section-header {
  display: flex; align-items: center; gap: 0.8rem;
  padding: 1rem 1.2rem; cursor: pointer; user-select: none;
  transition: background 0.2s;
}
.section-header:hover { background: rgba(0,0,0,0.02); }
.section-number {
  width: 32px; height: 32px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-family: 'Quicksand', sans-serif; font-weight: 700;
  font-size: 0.85rem; color: white; flex-shrink: 0;
}
.section-title { flex: 1; }
.section-title .label {
  font-size: 0.65rem; font-family: 'Quicksand', sans-serif;
  font-weight: 700; text-transform: uppercase;
  letter-spacing: 0.08em; opacity: 0.7;
}
.section-title .name { font-size: 1rem; font-weight: 700; }
.section-chevron { font-size: 1.2rem; transition: transform 0.3s; opacity: 0.4; }
.section-card.open .section-chevron { transform: rotate(180deg); }
.section-body { padding: 0 1.2rem 1.2rem; display: none; }
.section-card.open .section-body { display: block; }

.yamada-comment {
  background: var(--yamada-bg); border: 1px solid var(--yamada-border);
  border-radius: var(--radius-sm); padding: 0.8rem 1rem;
  margin-bottom: 1rem; display: flex; gap: 0.6rem;
  align-items: flex-start; font-size: 0.85rem; line-height: 1.6;
}
.yamada-text { flex: 1; }
.yamada-name {
  font-size: 0.7rem; font-weight: 700; color: var(--yamada-accent);
  font-family: 'Quicksand', sans-serif; margin-bottom: 0.15rem;
}

.recipe-box {
  background: #FFFDF9; border: 1px solid #F0E8D8;
  border-radius: var(--radius-sm); padding: 1.2rem; margin-bottom: 1rem;
}
.recipe-box h3 { font-family: 'Quicksand', sans-serif; font-size: 1.1rem; color: var(--navy); margin-bottom: 0.8rem; }
.recipe-box .ingredients {
  font-size: 0.85rem; color: var(--text-light); margin-bottom: 1rem;
  padding: 0.6rem; background: rgba(232,121,47,0.05); border-radius: 8px;
}
.recipe-box .ingredients strong { color: var(--primary-dark); }
.recipe-steps { counter-reset: step; list-style: none; }
.recipe-steps li {
  counter-increment: step; padding: 0.5rem 0 0.5rem 2.2rem;
  position: relative; font-size: 0.9rem; border-bottom: 1px solid #F5F0E8;
}
.recipe-steps li:last-child { border-bottom: none; }
.recipe-steps li::before {
  content: counter(step); position: absolute; left: 0; top: 0.5rem;
  width: 24px; height: 24px; background: var(--primary); color: white;
  border-radius: 50%; font-size: 0.75rem; font-family: 'Quicksand', sans-serif;
  font-weight: 700; display: flex; align-items: center; justify-content: center;
}
.recipe-steps li strong { color: var(--navy); }

.action-row { display: flex; gap: 0.5rem; margin: 0.8rem 0; flex-wrap: wrap; }
.action-btn {
  display: inline-flex; align-items: center; gap: 0.3rem;
  padding: 0.4rem 0.8rem; border: 1px solid var(--border);
  border-radius: 20px; font-size: 0.75rem; background: white;
  cursor: pointer; transition: all 0.2s; font-family: 'Noto Sans JP', sans-serif;
  color: var(--text-light); text-decoration: none;
}
.action-btn:hover { background: var(--blue-light); border-color: var(--blue); color: var(--navy); }

.vocab-toggle {
  display: inline-flex; align-items: center; gap: 0.3rem;
  padding: 0.4rem 0.8rem; border: 1px solid var(--border);
  border-radius: 20px; font-size: 0.75rem; background: white;
  cursor: pointer; transition: all 0.2s; color: var(--text-light); margin-bottom: 0.5rem;
}
.vocab-toggle:hover { background: var(--green-light); border-color: var(--green); }
.vocab-list { display: none; margin-top: 0.5rem; }
.vocab-list.show { display: block; }
.vocab-item {
  display: flex; align-items: center; gap: 0.8rem;
  padding: 0.5rem 0.8rem; border-radius: 8px; font-size: 0.85rem;
  transition: background 0.2s; cursor: pointer;
}
.vocab-item:hover { background: rgba(0,0,0,0.03); }
.vocab-check {
  width: 18px; height: 18px; border: 2px solid var(--border);
  border-radius: 4px; flex-shrink: 0; display: flex;
  align-items: center; justify-content: center;
  transition: all 0.2s; font-size: 0.7rem; color: transparent;
}
.vocab-item.checked .vocab-check { background: var(--primary); border-color: var(--primary); color: white; }
.vocab-en { font-weight: 700; color: var(--navy); min-width: 100px; }
.vocab-ja { color: var(--text-light); font-size: 0.8rem; }

.quiz-question { font-weight: 700; font-size: 0.95rem; margin-bottom: 0.8rem; color: var(--navy); padding-left: 0.3rem; }
.quiz-options { display: flex; flex-direction: column; gap: 0.5rem; }
.quiz-option {
  padding: 0.7rem 1rem; border: 2px solid var(--border);
  border-radius: var(--radius-sm); cursor: pointer; font-size: 0.9rem;
  transition: all 0.2s; background: white;
}
.quiz-option:hover { border-color: var(--blue); background: var(--blue-light); }
.quiz-option.correct { border-color: var(--green); background: var(--green-light); }
.quiz-option.wrong { border-color: #E53935; background: #FFEBEE; }
.quiz-feedback { margin-top: 0.8rem; padding: 0.6rem 0.8rem; border-radius: 8px; font-size: 0.85rem; display: none; }
.quiz-feedback.show { display: block; }
.quiz-feedback.correct { background: var(--green-light); color: #2E7D32; }
.quiz-feedback.wrong { background: #FFEBEE; color: #C62828; }

.review-card {
  background: linear-gradient(135deg, #FFFDF7 0%, #FFF8F0 100%);
  border: 1px solid #F0E0C8; border-radius: var(--radius-sm);
  padding: 1.2rem; margin-bottom: 1rem;
}
.review-header { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.6rem; }
.review-header h4 { font-family: 'Quicksand', sans-serif; font-size: 0.95rem; color: var(--navy); }
.review-stars { color: #F9A825; font-size: 0.9rem; }
.review-text { font-size: 0.9rem; line-height: 1.9; color: var(--text); }

.tips-box {
  background: linear-gradient(135deg, #F0F8FF 0%, #E8F5E9 100%);
  border: 1px solid #C8E6C9; border-radius: var(--radius-sm); padding: 1.2rem;
}
.tips-box p { font-size: 0.85rem; margin-bottom: 0.8rem; line-height: 1.8; }
.tips-box p:last-child { margin-bottom: 0; }

.conversation-scene {
  background: var(--blue-light); border-radius: var(--radius-sm);
  padding: 0.6rem 1rem; font-size: 0.8rem; color: var(--navy);
  margin-bottom: 1rem; font-weight: 500;
}
.convo-line { display: flex; gap: 0.6rem; margin-bottom: 0.6rem; align-items: flex-start; }
.convo-speaker { font-weight: 700; font-size: 0.8rem; min-width: 50px; padding-top: 0.1rem; flex-shrink: 0; }
.convo-speaker.you { color: var(--primary); }
.convo-speaker.emma { color: var(--blue); }
.convo-text { font-size: 0.9rem; }

/* ===== LISTENING ===== */
.listening-box {
  background: var(--listening-light); border: 1px solid #B2DFDB;
  border-radius: var(--radius-sm); padding: 1.2rem; margin-bottom: 1rem;
}
.listening-box h4 { font-family: 'Quicksand', sans-serif; color: var(--listening-color); font-size: 0.95rem; margin-bottom: 0.8rem; }
.listening-instruction { font-size: 0.85rem; color: var(--text-light); margin-bottom: 0.6rem; }

.tts-btn {
  display: inline-flex; align-items: center; gap: 0.4rem;
  padding: 0.5rem 1.2rem; background: var(--listening-color);
  color: white; border: none; border-radius: 20px;
  font-size: 0.8rem; font-family: 'Noto Sans JP', sans-serif;
  font-weight: 700; cursor: pointer; transition: all 0.2s;
  margin-bottom: 0.8rem;
}
.tts-btn:hover { background: #00695C; transform: translateY(-1px); }
.tts-btn.playing { background: #E53935; }
.tts-btn.playing:hover { background: #C62828; }

.tts-speed {
  display: inline-flex; align-items: center; gap: 0.3rem;
  margin-left: 0.5rem; font-size: 0.75rem; color: var(--text-light);
}
.tts-speed select {
  border: 1px solid var(--border); border-radius: 12px;
  padding: 0.2rem 0.4rem; font-size: 0.75rem;
  background: white; cursor: pointer;
}

.gap-fill { margin: 0.5rem 0; font-size: 0.9rem; line-height: 2.4; }
.gap-fill input {
  border: none; border-bottom: 2px solid var(--listening-color);
  background: rgba(0,137,123,0.05); border-radius: 4px 4px 0 0;
  padding: 0.1rem 0.3rem; font-size: 0.9rem;
  font-family: 'Quicksand', sans-serif; font-weight: 600;
  width: 100px; text-align: center; outline: none;
  color: var(--listening-color);
}
.gap-fill input:focus { border-bottom-color: var(--primary); background: rgba(232,121,47,0.08); }
.gap-fill input.correct-input { border-bottom-color: #4CAF50; background: rgba(76,175,80,0.1); }
.gap-fill input.wrong-input { border-bottom-color: #E53935; background: rgba(229,57,53,0.1); }

.listening-check-btn {
  display: inline-flex; align-items: center; gap: 0.4rem;
  padding: 0.5rem 1.2rem; background: var(--listening-color);
  color: white; border: none; border-radius: 20px;
  font-size: 0.8rem; font-family: 'Noto Sans JP', sans-serif;
  font-weight: 700; cursor: pointer; transition: all 0.2s; margin-top: 0.5rem;
}
.listening-check-btn:hover { background: #00695C; transform: translateY(-1px); }
.listening-answer {
  margin-top: 0.8rem; padding: 0.6rem 0.8rem; background: white;
  border-radius: 8px; font-size: 0.85rem; display: none; border: 1px solid #B2DFDB;
}
.listening-answer.show { display: block; }

.listening-script-toggle {
  display: inline-flex; align-items: center; gap: 0.3rem;
  padding: 0.4rem 0.8rem; border: 1px dashed var(--listening-color);
  border-radius: 20px; font-size: 0.75rem; background: white;
  cursor: pointer; color: var(--listening-color); margin-top: 0.5rem;
}
.listening-script { display: none; margin-top: 0.6rem; padding: 0.8rem; background: white; border-radius: 8px; font-size: 0.85rem; border: 1px solid #B2DFDB; line-height: 1.8; }
.listening-script.show { display: block; }

.try-it-box {
  background: var(--purple-light); border: 1px solid #CE93D8;
  border-radius: var(--radius-sm); padding: 1.2rem;
}
.try-it-box h4 { color: var(--purple); font-family: 'Quicksand', sans-serif; margin-bottom: 0.5rem; }
.try-it-box p { font-size: 0.85rem; margin-bottom: 0.6rem; }
.try-it-textarea {
  width: 100%; min-height: 100px; border: 1px solid #CE93D8;
  border-radius: 8px; padding: 0.8rem; font-size: 0.9rem;
  font-family: 'Noto Sans JP', sans-serif; line-height: 1.8;
  resize: vertical; outline: none; transition: border-color 0.2s;
}
.try-it-textarea:focus { border-color: var(--purple); }

.summary-box {
  background: white; border: 2px dashed var(--border);
  border-radius: var(--radius-sm); padding: 1.2rem; text-align: center;
}
.summary-btn {
  display: inline-flex; align-items: center; gap: 0.4rem;
  padding: 0.6rem 1.5rem; background: var(--navy); color: white;
  border: none; border-radius: 20px; font-size: 0.85rem;
  font-family: 'Noto Sans JP', sans-serif; font-weight: 700;
  cursor: pointer; transition: all 0.2s; margin-bottom: 0.5rem;
}
.summary-btn:hover { background: #2A5080; transform: translateY(-1px); }
.summary-output {
  margin-top: 0.8rem; text-align: left; font-size: 0.8rem;
  color: var(--text-light); padding: 0.8rem; background: #F5F5F5;
  border-radius: 8px; display: none; white-space: pre-wrap;
}
.summary-output.show { display: block; }

.day-nav {
  display: flex; justify-content: space-between; align-items: center;
  padding: 1rem 0; margin-top: 1rem; border-top: 1px solid var(--border);
}
.nav-btn {
  display: inline-flex; align-items: center; gap: 0.3rem;
  padding: 0.5rem 1rem; border: 1px solid var(--border);
  border-radius: 20px; font-size: 0.85rem; background: white;
  cursor: pointer; transition: all 0.2s; text-decoration: none;
  color: var(--text); font-family: 'Noto Sans JP', sans-serif;
}
.nav-btn:hover { background: var(--blue-light); border-color: var(--blue); }
.nav-btn.disabled { opacity: 0.4; pointer-events: none; }
.home-btn {
  padding: 0.5rem 1rem; background: var(--primary); color: white;
  border: none; border-radius: 20px; font-size: 0.8rem; cursor: pointer;
  text-decoration: none; font-family: 'Quicksand', sans-serif; font-weight: 700;
}

.sec-recipe .section-number { background: var(--primary); }
.sec-quiz1 .section-number { background: var(--blue); }
.sec-review .section-number { background: #F9A825; }
.sec-quiz2 .section-number { background: var(--blue); }
.sec-tips .section-number { background: var(--green); }
.sec-convo .section-number { background: var(--navy); }
.sec-quiz3 .section-number { background: var(--blue); }
.sec-listening .section-number { background: var(--listening-color); }
.sec-tryit .section-number { background: var(--purple); }
.sec-summary .section-number { background: var(--text-light); }
.sec-pronun .section-number { background: var(--pronun-color); }

/* ===== PRONUNCIATION CHECK ===== */
.pronun-box {
  background: var(--pronun-light);
  border: 1px solid #FFB74D;
  border-radius: var(--radius-sm);
  padding: 1.2rem;
  margin-bottom: 1rem;
}
.pronun-box h4 {
  font-family: 'Quicksand', sans-serif;
  color: var(--pronun-color);
  font-size: 0.95rem;
  margin-bottom: 0.6rem;
}
.pronun-sentence {
  background: white;
  border: 2px solid #FFB74D;
  border-radius: var(--radius-sm);
  padding: 1rem;
  margin: 0.8rem 0;
  font-size: 1.05rem;
  font-weight: 600;
  color: var(--navy);
  text-align: center;
  line-height: 1.8;
}
.pronun-sentence .word {
  display: inline-block;
  padding: 0.1rem 0.2rem;
  border-radius: 4px;
  transition: all 0.3s;
  margin: 0 1px;
}
.pronun-sentence .word.correct { background: rgba(76,175,80,0.2); color: #2E7D32; }
.pronun-sentence .word.wrong { background: rgba(229,57,53,0.2); color: #C62828; text-decoration: underline wavy #E53935; }
.pronun-sentence .word.missed { background: rgba(255,152,0,0.2); color: #E65100; }

.pronun-record-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.7rem 1.5rem;
  background: var(--pronun-color);
  color: white;
  border: none;
  border-radius: 25px;
  font-size: 0.9rem;
  font-family: 'Noto Sans JP', sans-serif;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.2s;
}
.pronun-record-btn:hover { background: #BF360C; transform: translateY(-1px); }
.pronun-record-btn.recording {
  background: #E53935;
  animation: pulse 1.5s infinite;
}
@keyframes pulse {
  0%, 100% { box-shadow: 0 0 0 0 rgba(229,57,53,0.4); }
  50% { box-shadow: 0 0 0 12px rgba(229,57,53,0); }
}

.pronun-result {
  margin-top: 1rem;
  padding: 0.8rem 1rem;
  border-radius: var(--radius-sm);
  display: none;
  font-size: 0.85rem;
}
.pronun-result.show { display: block; }
.pronun-result.good { background: var(--green-light); border: 1px solid #A5D6A7; }
.pronun-result.needs-work { background: #FFF3E0; border: 1px solid #FFB74D; }
.pronun-result.try-again { background: #FFEBEE; border: 1px solid #EF9A9A; }

.pronun-score {
  display: flex;
  align-items: center;
  gap: 0.8rem;
  margin-bottom: 0.5rem;
}
.pronun-score-circle {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Quicksand', sans-serif;
  font-weight: 700;
  font-size: 1.1rem;
  color: white;
  flex-shrink: 0;
}
.pronun-score-circle.high { background: var(--green); }
.pronun-score-circle.mid { background: #FF9800; }
.pronun-score-circle.low { background: #E53935; }

.pronun-heard {
  margin-top: 0.5rem;
  padding: 0.5rem 0.8rem;
  background: rgba(0,0,0,0.03);
  border-radius: 8px;
  font-size: 0.8rem;
  color: var(--text-light);
}
.pronun-heard strong { color: var(--navy); }

.pronun-tips {
  margin-top: 0.6rem;
  font-size: 0.8rem;
  color: var(--text-light);
  padding-left: 0.5rem;
}
.pronun-tips li { margin-bottom: 0.3rem; }

.pronun-nav {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 0.8rem;
}
.pronun-nav-btn {
  padding: 0.4rem 1rem;
  border: 1px solid var(--border);
  border-radius: 20px;
  font-size: 0.8rem;
  background: white;
  cursor: pointer;
  transition: all 0.2s;
}
.pronun-nav-btn:hover { background: var(--pronun-light); border-color: #FFB74D; }
.pronun-nav-btn.disabled { opacity: 0.3; pointer-events: none; }
.pronun-counter {
  font-size: 0.75rem;
  color: var(--text-light);
  font-family: 'Quicksand', sans-serif;
  font-weight: 600;
}
.pronun-browser-note {
  font-size: 0.7rem;
  color: var(--text-light);
  margin-top: 0.5rem;
  padding: 0.4rem 0.6rem;
  background: rgba(0,0,0,0.03);
  border-radius: 6px;
}

.repeat-count { font-size: 0.75rem; color: var(--text-light); margin-left: 0.5rem; }

@media (max-width: 480px) {
  .header h1 { font-size: 1.6rem; }
  .main { padding: 0.8rem 0.6rem 4rem; }
  .section-body { padding: 0 0.8rem 1rem; }
}
</style>
</head>
<body>

<div class="header">
  <div class="header-badge">COOKING ENGLISH â€” CUSTOM EDITION</div>
  <h1>ğŸ« Day 15: Blueberry Muffin</h1>
  <p>30æ—¥é–“ã‚¯ãƒƒã‚­ãƒ³ã‚°è‹±èª â€” 15æ—¥ç›®</p>
</div>

<div class="progress-bar">
  <div class="progress-dots">
    <div class="progress-dot active" data-section="0"></div>
    <div class="progress-dot" data-section="1"></div>
    <div class="progress-dot" data-section="2"></div>
    <div class="progress-dot" data-section="3"></div>
    <div class="progress-dot" data-section="4"></div>
    <div class="progress-dot" data-section="5"></div>
    <div class="progress-dot" data-section="6"></div>
    <div class="progress-dot" data-section="7"></div>
    <div class="progress-dot" data-section="8"></div>
    <div class="progress-dot" data-section="9"></div>
    <div class="progress-dot" data-section="10"></div>
  </div>
  <div class="progress-label">1 / 11 ã‚»ã‚¯ã‚·ãƒ§ãƒ³</div>
</div>

<div class="main">

<div class="section-card sec-recipe open" data-index="0">
  <div class="section-header" onclick="toggleSection(this)">
    <div class="section-number">1</div>
    <div class="section-title"><div class="label">Recipe</div><div class="name">Blueberry Muffinã®ãƒ¬ã‚·ãƒ”ã‚’èª­ã‚“ã§ã¿ã‚ˆã†</div></div>
    <div class="section-chevron">â–¾</div>
  </div>
  <div class="section-body">
    <div class="yamada-comment">
      <img src="assets/ryosuke.jpg" alt="Ryosuke" style="width:36px;height:36px;border-radius:50%;object-fit:cover;flex-shrink:0;box-shadow:0 2px 8px rgba(194,24,91,0.3);">
      <div class="yamada-text">
        <div class="yamada-name">Ryosuke</div>
        ãƒ–ãƒ«ãƒ¼ãƒ™ãƒªãƒ¼ãƒãƒ•ã‚£ãƒ³ã€æœã«ç„¼ããŸã¦ã‚’é£Ÿã¹ãŸã‚‰æœ€é«˜ã ã‚ˆã­ã€‚æ··ãœã™ããªã„ã®ãŒãƒã‚¤ãƒ³ãƒˆã£ã¦é¢ç™½ã„ã€‚æ–™ç†ã‚‚è‹±èªã‚‚ã€åŠ›ã®å…¥ã‚Œã™ãã«æ³¨æ„ã£ã¦ã“ã¨ã‹ãªï¼
      </div>
    </div>
    <div class="recipe-box">
      <h3>How to Make Blueberry Muffins</h3>
      <p>Blueberry muffins are a classic cafÃ© treat. They are soft, sweet, and full of juicy blueberries.</p>
      <div class="ingredients">
        <strong>Ingredients:</strong><br>
        plain flour, sugar, baking powder, salt, egg, milk, butter, vanilla extract, fresh blueberries
      </div>
      <ol class="recipe-steps">
        <li><strong>Preheat</strong> the oven to 190 degrees Celsius. <strong>Place</strong> paper cases in a muffin tray.</li>
        <li><strong>Mix</strong> the flour, sugar, baking powder, and salt in a large bowl.</li>
        <li><strong>Whisk</strong> the egg, milk, melted butter, and vanilla in another bowl.</li>
        <li><strong>Pour</strong> the wet ingredients into the dry ingredients. <strong>Stir</strong> until just mixed. Do not over-mix!</li>
        <li><strong>Fold</strong> the blueberries into the batter gently.</li>
        <li><strong>Spoon</strong> the batter into the paper cases. <strong>Bake</strong> for 20 to 25 minutes until the tops are golden. <strong>Cool</strong> on a wire rack.</li>
      </ol>
    </div>
    <div class="action-row">
      <button class="action-btn" onclick="copyText('recipe-text')">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>
      <button class="action-btn tts-btn" onclick="speakText('recipe-tts', this)">ğŸ”Š èª­ã¿ä¸Šã’</button>
    </div>
    <div id="recipe-text" style="display:none">How to Make Blueberry Muffins. Blueberry muffins are a classic cafÃ© treat. They are soft, sweet, and full of juicy blueberries. Ingredients: plain flour, sugar, baking powder, salt, egg, milk, butter, vanilla extract, fresh blueberries. Steps: 1. **Preheat** the oven to 190 degrees Celsius. **Place** paper cases in a muffin tray. 2. **Mix** the flour, sugar, baking powder, and salt in a large bowl. 3. **Whisk** the egg, milk, melted butter, and vanilla in another bowl. 4. **Pour** the wet ingredients into the dry ingredients. **Stir** until just mixed. Do not over-mix! 5. **Fold** the blueberries into the batter gently. 6. **Spoon** the batter into the paper cases. **Bake** for 20 to 25 minutes until the tops are golden. **Cool** on a wire rack.</div>
    <div id="recipe-tts" style="display:none">How to Make Blueberry Muffins. Blueberry muffins are a classic cafÃ© treat. They are soft, sweet, and full of juicy blueberries. Step 1. **Preheat** the oven to 190 degrees Celsius. **Place** paper cases in a muffin tray. Step 2. **Mix** the flour, sugar, baking powder, and salt in a large bowl. Step 3. **Whisk** the egg, milk, melted butter, and vanilla in another bowl. Step 4. **Pour** the wet ingredients into the dry ingredients. **Stir** until just mixed. Do not over-mix! Step 5. **Fold** the blueberries into the batter gently. Step 6. **Spoon** the batter into the paper cases. **Bake** for 20 to 25 minutes until the tops are golden. **Cool** on a wire rack.</div>
    <button class="vocab-toggle" onclick="toggleVocab(this)">ğŸ“š å˜èªãƒªã‚¹ãƒˆã‚’è¦‹ã‚‹</button>
    <div class="vocab-list">
      <p style="font-size:0.75rem;color:var(--text-light);margin-bottom:0.5rem;">ğŸ’¡ ã‚ã‹ã‚‰ãªã‹ã£ãŸå˜èªã«ãƒã‚§ãƒƒã‚¯ âœ“</p>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">muffin tray</span><span class="vocab-ja">ãƒãƒ•ã‚£ãƒ³å‹</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">paper cases</span><span class="vocab-ja">ç´™ã®ã‚«ãƒƒãƒ—</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">whisk</span><span class="vocab-ja">æ³¡ç«‹ã¦å™¨ã§æ··ãœã‚‹</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">melted</span><span class="vocab-ja">æº¶ã‹ã—ãŸ</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">over-mix</span><span class="vocab-ja">æ··ãœã™ãã‚‹</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">spoon</span><span class="vocab-ja">ã‚¹ãƒ—ãƒ¼ãƒ³ã§ã™ãã†ï¼ˆå‹•è©ï¼‰</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">wire rack</span><span class="vocab-ja">ç¶²ã®å†·å´å°</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">juicy</span><span class="vocab-ja">ã‚¸ãƒ¥ãƒ¼ã‚·ãƒ¼ãª</span></div>
    </div>
  </div>
</div>

<div class="section-card sec-quiz1" data-index="1">
  <div class="section-header" onclick="toggleSection(this)">
    <div class="section-number">2</div>
    <div class="section-title"><div class="label">Quiz 1</div><div class="name">ãƒ¬ã‚·ãƒ”ã®å†…å®¹ãƒã‚§ãƒƒã‚¯</div></div>
    <div class="section-chevron">â–¾</div>
  </div>
  <div class="section-body">
    <div class="quiz-question">Q: ãƒãƒ•ã‚£ãƒ³ã®ç”Ÿåœ°ã‚’æ··ãœã‚‹ã¨ãã€æ°—ã‚’ã¤ã‘ã‚‹ã“ã¨ã¯ä½•ã§ã™ã‹ï¼Ÿ</div>
    <div class="quiz-options">
      <div class="quiz-option" onclick="checkQuiz(this, false)">ã—ã£ã‹ã‚Šæ··ãœã‚‹</div>
      <div class="quiz-option" onclick="checkQuiz(this, true)">æ··ãœã™ããªã„</div>
      <div class="quiz-option" onclick="checkQuiz(this, false)">10åˆ†é–“æ··ãœã‚‹</div>
    </div>
    <div class="quiz-feedback correct">â­• æ­£è§£ï¼æ­£è§£ï¼&quot;Stir until just mixed. Do not over-mix!&quot;</div>
    <div class="quiz-feedback wrong">âŒ 4ç•ªç›®ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’ã‚‚ã†ä¸€å›èª­ã‚“ã§ã¿ã‚ˆã†ï¼</div>
  </div>
</div>

<div class="section-card sec-review" data-index="2">
  <div class="section-header" onclick="toggleSection(this)">
    <div class="section-number">3</div>
    <div class="section-title"><div class="label">Review</div><div class="name">ã‚«ãƒ•ã‚§ã®ãŠå®¢ã•ã‚“ãƒ¬ãƒ“ãƒ¥ãƒ¼</div></div>
    <div class="section-chevron">â–¾</div>
  </div>
  <div class="section-body">
    <div class="yamada-comment">
      <img src="assets/ryosuke.jpg" alt="Ryosuke" style="width:36px;height:36px;border-radius:50%;object-fit:cover;flex-shrink:0;box-shadow:0 2px 8px rgba(194,24,91,0.3);">
      <div class="yamada-text">
        <div class="yamada-name">Ryosuke</div>
        æ¸¯ã®æ™¯è‰²ã‚’è¦‹ãªãŒã‚‰ã®æœé£Ÿã€æ†§ã‚Œã‚‹ãªãã€‚Snow Manã®ãƒ„ã‚¢ãƒ¼ã§å„åœ°ã«è¡Œãã‘ã©ã€æœã®ã‚«ãƒ•ã‚§ã‚¿ã‚¤ãƒ ã¯å¤§äº‹ãªãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥æ™‚é–“ãªã‚“ã ã€‚
      </div>
    </div>
    <div class="review-card">
      <div class="review-header"><span>â˜•</span><h4>Harbour Lights CafÃ© â€” Marlin Marina, Cairns, Australia</h4></div>
      <div class="review-stars">â­â­â­â­</div>
      <div class="review-text" style="margin-top:0.5rem;">
        I stopped by Harbour Lights CafÃ© this morning before work. It is near the marina where the reef boats leave. I ordered a blueberry muffin and a long black. The muffin was soft and fluffy with lots of blueberries inside. It was still warm from the oven. The coffee was nice and strong. The view of the boats in the harbour was lovely. I always enjoy my breakfast here.
      </div>
    </div>
    <div class="action-row">
      <button class="action-btn" onclick="copyText('review-text')">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>
      <button class="action-btn tts-btn" onclick="speakText('review-tts', this)">ğŸ”Š èª­ã¿ä¸Šã’</button>
    </div>
    <div id="review-text" style="display:none">I stopped by Harbour Lights CafÃ© this morning before work. It is near the marina where the reef boats leave. I ordered a blueberry muffin and a long black. The muffin was soft and fluffy with lots of blueberries inside. It was still warm from the oven. The coffee was nice and strong. The view of the boats in the harbour was lovely. I always enjoy my breakfast here.</div>
    <div id="review-tts" style="display:none">I stopped by Harbour Lights CafÃ© this morning before work. It is near the marina where the reef boats leave. I ordered a blueberry muffin and a long black. The muffin was soft and fluffy with lots of blueberries inside. It was still warm from the oven. The coffee was nice and strong. The view of the boats in the harbour was lovely. I always enjoy my breakfast here.</div>
    <button class="vocab-toggle" onclick="toggleVocab(this)">ğŸ“š å˜èªãƒªã‚¹ãƒˆã‚’è¦‹ã‚‹</button>
    <div class="vocab-list">
      <p style="font-size:0.75rem;color:var(--text-light);margin-bottom:0.5rem;">ğŸ’¡ ã‚ã‹ã‚‰ãªã‹ã£ãŸå˜èªã«ãƒã‚§ãƒƒã‚¯ âœ“</p>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">stopped by</span><span class="vocab-ja">ç«‹ã¡å¯„ã£ãŸ</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">marina</span><span class="vocab-ja">ãƒãƒªãƒ¼ãƒŠï¼ˆèˆ¹ç€ãå ´ï¼‰</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">reef boats</span><span class="vocab-ja">ãƒªãƒ¼ãƒ•ï¼ˆã‚µãƒ³ã‚´ç¤ï¼‰ã«è¡Œããƒœãƒ¼ãƒˆ</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">long black</span><span class="vocab-ja">ãƒ­ãƒ³ã‚°ãƒ–ãƒ©ãƒƒã‚¯ï¼ˆAUã®ãƒ–ãƒ©ãƒƒã‚¯ã‚³ãƒ¼ãƒ’ãƒ¼ï¼‰</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">harbour</span><span class="vocab-ja">æ¸¯</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">view</span><span class="vocab-ja">æ™¯è‰²</span></div>
    </div>
  </div>
</div>

<div class="section-card sec-quiz2" data-index="3">
  <div class="section-header" onclick="toggleSection(this)">
    <div class="section-number">4</div>
    <div class="section-title"><div class="label">Quiz 2</div><div class="name">ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®å†…å®¹ãƒã‚§ãƒƒã‚¯</div></div>
    <div class="section-chevron">â–¾</div>
  </div>
  <div class="section-body">
    <div class="quiz-question">Q: ã“ã®ã‚«ãƒ•ã‚§ã¯ã©ã“ã®è¿‘ãã«ã‚ã‚Šã¾ã™ã‹ï¼Ÿ</div>
    <div class="quiz-options">
      <div class="quiz-option" onclick="checkQuiz(this, false)">ãƒ“ãƒ¼ãƒ</div>
      <div class="quiz-option" onclick="checkQuiz(this, true)">ãƒãƒªãƒ¼ãƒŠ</div>
      <div class="quiz-option" onclick="checkQuiz(this, false)">å…¬åœ’</div>
    </div>
    <div class="quiz-feedback correct">â­• æ­£è§£ï¼æ­£è§£ï¼&quot;It is near the marina where the reef boats leave.&quot;</div>
    <div class="quiz-feedback wrong">âŒ &quot;near&quot; ã®å¾Œã‚’ã‚‚ã†ä¸€å›èª­ã‚“ã§ã¿ã‚ˆã†ï¼</div>
  </div>
</div>

<div class="section-card sec-tips" data-index="4">
  <div class="section-header" onclick="toggleSection(this)">
    <div class="section-number">5</div>
    <div class="section-title"><div class="label">ğŸ¦˜ Australia Tips</div><div class="name">ã‚ªãƒ¼ã‚¹ãƒˆãƒ©ãƒªã‚¢ã§Blueberry Muffinã‚’æ¥½ã—ã‚€ãªã‚‰</div></div>
    <div class="section-chevron">â–¾</div>
  </div>
  <div class="section-body">
    <div class="tips-box">
      <p>ã‚±ã‚¢ãƒ³ã‚ºã®<strong>Marlin Marina</strong>ã‹ã‚‰ã¯ã‚°ãƒ¬ãƒ¼ãƒˆãƒãƒªã‚¢ãƒªãƒ¼ãƒ•ã¸ã®ãƒ„ã‚¢ãƒ¼ãƒœãƒ¼ãƒˆãŒå‡ºç™ºã—ã¾ã™ã€‚æœæ—©ããƒãƒªãƒ¼ãƒŠã®ã‚«ãƒ•ã‚§ã§ã€Œ<strong>A muffin and a long black, please.</strong>ã€ã¨æ³¨æ–‡ã—ã¦ã€ãƒœãƒ¼ãƒˆã‚’çœºã‚ã‚‹ã®ã‚‚ç´ æ•µã§ã™ã€‚</p>
      <p>ã‚ªãƒ¼ã‚¹ãƒˆãƒ©ãƒªã‚¢ã®ã‚«ãƒ•ã‚§ã§ã¯ãƒãƒ•ã‚£ãƒ³ã¯æœé£Ÿã®å®šç•ªã€‚ã€Œ<strong>What muffins do you have today?</strong>ã€ã¨èãã¨ã€æ—¥æ›¿ã‚ã‚Šã®ç¨®é¡ã‚’æ•™ãˆã¦ãã‚Œã¾ã™ã€‚<strong>blueberry</strong>ã€<strong>chocolate chip</strong>ã€<strong>banana</strong>ãŒäººæ°—ã§ã™ã€‚</p>
      <p><strong>Long black</strong>ã¯ã‚ªãƒ¼ã‚¹ãƒˆãƒ©ãƒªã‚¢ç‹¬ç‰¹ã®ã‚³ãƒ¼ãƒ’ãƒ¼ã€‚ã‚¨ã‚¹ãƒ—ãƒ¬ãƒƒã‚½ã«ãŠæ¹¯ã‚’è¶³ã—ãŸã‚‚ã®ã§ã€ã‚¢ãƒ¡ãƒªã‚«ãƒ¼ãƒã«ä¼¼ã¦ã„ã¾ã™ãŒå°‘ã—é•ã„ã¾ã™ã€‚ã€Œ<strong>Can I have a long black?</strong>ã€ã¯ã‚ªãƒ¼ã‚¹ãƒˆãƒ©ãƒªã‚¢ã®ã‚«ãƒ•ã‚§ã§ä½¿ãˆã‚‹å¿…é ˆãƒ•ãƒ¬ãƒ¼ã‚ºã§ã™ï¼</p>
    </div>
  </div>
</div>

<div class="section-card sec-convo" data-index="5">
  <div class="section-header" onclick="toggleSection(this)">
    <div class="section-number">6</div>
    <div class="section-title"><div class="label">Conversation</div><div class="name">ã‚«ãƒ•ã‚§ã§ã®æ¥å®¢å ´é¢</div></div>
    <div class="section-chevron">â–¾</div>
  </div>
  <div class="section-body">
    <div class="yamada-comment">
      <img src="assets/ryosuke.jpg" alt="Ryosuke" style="width:36px;height:36px;border-radius:50%;object-fit:cover;flex-shrink:0;box-shadow:0 2px 8px rgba(194,24,91,0.3);">
      <div class="yamada-text">
        <div class="yamada-name">Ryosuke</div>
        å¸¸é€£ã•ã‚“ã¨ã®ä¼šè©±ã£ã¦æ¥½ã—ã„ã‚ˆã­ã€‚ &#x27;The usual?&#x27; ã£ã¦è¨€ãˆã‚‹ãã‚‰ã„ãŠå®¢ã•ã‚“ã¨ä»²è‰¯ããªã‚ŒãŸã‚‰ç´ æ•µã€‚é™¸ä¸Šéƒ¨ã®ä»²é–“ã¿ãŸã„ãªä¿¡é ¼é–¢ä¿‚ã ã­ã€‚
      </div>
    </div>
    <div class="conversation-scene">â˜• ã‚«ãƒ•ã‚§ã§ã€å¸¸é€£ã®ãŠå®¢ã•ã‚“ï¼ˆSarahï¼‰ãŒæœé£Ÿã‚’æ³¨æ–‡ã™ã‚‹å ´é¢</div>
    <div class="convo-line"><span class="convo-speaker you">You:</span><span class="convo-text">Morning, Sarah! The usual today?</span></div>
    <div class="convo-line"><span class="convo-speaker emma">Sarah:</span><span class="convo-text">Morning! Actually, I want to try something different.</span></div>
    <div class="convo-line"><span class="convo-speaker you">You:</span><span class="convo-text">Sure! We have blueberry muffins fresh out of the oven.</span></div>
    <div class="convo-line"><span class="convo-speaker emma">Sarah:</span><span class="convo-text">Oh, that sounds perfect! I will have one of those.</span></div>
    <div class="convo-line"><span class="convo-speaker you">You:</span><span class="convo-text">Great choice! Would you like butter with it?</span></div>
    <div class="convo-line"><span class="convo-speaker emma">Sarah:</span><span class="convo-text">No thanks. But can I have it warmed up a little?</span></div>
    <div class="convo-line"><span class="convo-speaker you">You:</span><span class="convo-text">No problem! And your coffee? A flat white as usual?</span></div>
    <div class="convo-line"><span class="convo-speaker emma">Sarah:</span><span class="convo-text">Actually, I will try a long black today.</span></div>
    <div class="convo-line"><span class="convo-speaker you">You:</span><span class="convo-text">Feeling adventurous! That is eleven dollars fifty, please.</span></div>
    <div class="convo-line"><span class="convo-speaker emma">Sarah:</span><span class="convo-text">Here you go. Can I sit by the window?</span></div>
    <div class="convo-line"><span class="convo-speaker you">You:</span><span class="convo-text">Of course! That table is free. Enjoy your breakfast!</span></div>
    <div class="action-row">
      <button class="action-btn" onclick="copyText('convo-text')">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>
      <button class="action-btn tts-btn" onclick="speakText('convo-tts', this)">ğŸ”Š èª­ã¿ä¸Šã’</button>
    </div>
    <div id="convo-text" style="display:none">You: Morning, Sarah! The usual today? Sarah: Morning! Actually, I want to try something different. You: Sure! We have blueberry muffins fresh out of the oven. Sarah: Oh, that sounds perfect! I will have one of those. You: Great choice! Would you like butter with it? Sarah: No thanks. But can I have it warmed up a little? You: No problem! And your coffee? A flat white as usual? Sarah: Actually, I will try a long black today. You: Feeling adventurous! That is eleven dollars fifty, please. Sarah: Here you go. Can I sit by the window? You: Of course! That table is free. Enjoy your breakfast!</div>
    <div id="convo-tts" style="display:none">Morning, Sarah! The usual today? ... Morning! Actually, I want to try something different. ... Sure! We have blueberry muffins fresh out of the oven. ... Oh, that sounds perfect! I will have one of those. ... Great choice! Would you like butter with it? ... No thanks. But can I have it warmed up a little? ... No problem! And your coffee? A flat white as usual? ... Actually, I will try a long black today. ... Feeling adventurous! That is eleven dollars fifty, please. ... Here you go. Can I sit by the window? ... Of course! That table is free. Enjoy your breakfast!</div>
    <button class="vocab-toggle" onclick="toggleVocab(this)">ğŸ“š å˜èªãƒªã‚¹ãƒˆã‚’è¦‹ã‚‹</button>
    <div class="vocab-list">
      <p style="font-size:0.75rem;color:var(--text-light);margin-bottom:0.5rem;">ğŸ’¡ ã‚ã‹ã‚‰ãªã‹ã£ãŸå˜èªã«ãƒã‚§ãƒƒã‚¯ âœ“</p>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">the usual</span><span class="vocab-ja">ã„ã¤ã‚‚ã®</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">something different</span><span class="vocab-ja">ã„ã¤ã‚‚ã¨é•ã†ã‚‚ã®</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">fresh out of the oven</span><span class="vocab-ja">ç„¼ããŸã¦ã®</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">feeling adventurous</span><span class="vocab-ja">å†’é™ºå¿ƒãŒã‚ã‚‹ãƒ»æŒ‘æˆ¦çš„ãª</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">by the window</span><span class="vocab-ja">çª“éš›ã«</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">free</span><span class="vocab-ja">ï¼ˆå¸­ãŒï¼‰ç©ºã„ã¦ã„ã‚‹</span></div>
    </div>
  </div>
</div>

<div class="section-card sec-quiz3" data-index="6">
  <div class="section-header" onclick="toggleSection(this)">
    <div class="section-number">7</div>
    <div class="section-title"><div class="label">Quiz 3</div><div class="name">ä¼šè©±ã®å†…å®¹ãƒã‚§ãƒƒã‚¯</div></div>
    <div class="section-chevron">â–¾</div>
  </div>
  <div class="section-body">
    <div class="quiz-question">Q: Sarahã¯ã„ã¤ã‚‚ã©ã‚“ãªã‚³ãƒ¼ãƒ’ãƒ¼ã‚’é£²ã‚“ã§ã„ã¾ã™ã‹ï¼Ÿ</div>
    <div class="quiz-options">
      <div class="quiz-option" onclick="checkQuiz(this, false)">ãƒ­ãƒ³ã‚°ãƒ–ãƒ©ãƒƒã‚¯</div>
      <div class="quiz-option" onclick="checkQuiz(this, true)">ãƒ•ãƒ©ãƒƒãƒˆãƒ›ãƒ¯ã‚¤ãƒˆ</div>
      <div class="quiz-option" onclick="checkQuiz(this, false)">ã‚«ãƒ—ãƒãƒ¼ãƒ</div>
    </div>
    <div class="quiz-feedback correct">â­• æ­£è§£ï¼æ­£è§£ï¼&quot;A flat white as usual?&quot; ã¨èã‹ã‚Œã¦ã„ã¾ã™ã€‚</div>
    <div class="quiz-feedback wrong">âŒ &quot;as usual&quot; ãŒå‡ºã¦ãã‚‹ã‚»ãƒªãƒ•ã‚’æ¢ã—ã¦ã¿ã‚ˆã†ï¼</div>
  </div>
</div>

<div class="section-card sec-listening" data-index="7">
  <div class="section-header" onclick="toggleSection(this)">
    <div class="section-number">8</div>
    <div class="section-title"><div class="label">ğŸ§ Listening Challenge</div><div class="name">ãƒªã‚¹ãƒ‹ãƒ³ã‚°ã«æŒ‘æˆ¦ã—ã‚ˆã†</div></div>
    <div class="section-chevron">â–¾</div>
  </div>
  <div class="section-body">
    <div class="yamada-comment">
      <img src="assets/ryosuke.jpg" alt="Ryosuke" style="width:36px;height:36px;border-radius:50%;object-fit:cover;flex-shrink:0;box-shadow:0 2px 8px rgba(194,24,91,0.3);">
      <div class="yamada-text">
        <div class="yamada-name">Ryosuke</div>
        ãƒ«ãƒ¼ãƒ ãƒ¡ã‚¤ãƒˆã¨ã®æœã®ä¼šè©±ã€æ—¥å¸¸ã®è‹±èªã£ã¦ä¸€ç•ªä½¿ã†ã‹ã‚‰å¤§äº‹ã€‚ãƒ•ã‚£ã‚®ãƒ¥ã‚¢ã‚¹ã‚±ãƒ¼ãƒˆã‚‚åŸºæœ¬ã®ã‚¨ãƒƒã‚¸ãƒ¯ãƒ¼ã‚¯ãŒå¤§äº‹ãªã®ã¨åŒã˜ã ã‚ˆã€‚
      </div>
    </div>

    <!-- Part A -->
    <div class="listening-box">
      <h4>ğŸ”Š Part A: ãƒ«ãƒ¼ãƒ ãƒ¡ã‚¤ãƒˆã¨ã®æœã®ä¼šè©±ï¼ˆç©´åŸ‹ã‚ï¼‰</h4>
      <p class="listening-instruction">éŸ³å£°ã‚’è´ã„ã¦ã€ç©ºæ¬„ã«å…¥ã‚‹å˜èªã‚’æ›¸ã„ã¦ã¿ã‚ˆã†ã€‚æœ€åˆã¯ã‚ã‹ã‚‰ãªãã¦å½“ç„¶ï¼ä½•å›ã§ã‚‚è´ã„ã¦OKã€‚</p>
      <div style="display:flex;align-items:center;gap:0.5rem;flex-wrap:wrap;margin-bottom:0.8rem;">
        <button class="tts-btn" onclick="speakText('listening-a-tts', this)">ğŸ”Š å†ç”Ÿ</button>
        <span class="tts-speed">é€Ÿåº¦: <select id="speed-a" onchange="currentSpeed=parseFloat(this.value)">
          <option value="0.7">ğŸ¢ ã‚†ã£ãã‚Š</option>
          <option value="0.85" selected>æ™®é€š</option>
          <option value="1">é€Ÿã„</option>
        </select></span>
        <span class="repeat-count" id="repeat-a">å†ç”Ÿå›æ•°: 0</span>
      </div>
      <div id="listening-a-tts" style="display:none">Good morning! Did you sleep well? Yes, I did. I am a bit hungry though. Me too. Do you want a muffin? I bought some yesterday. Blueberry? Yes, your favourite! Let me put the kettle on. Great. I will have tea this morning. There is milk in the fridge. Thanks! These muffins are really good.</div>
      <div class="gap-fill">1. I am a bit <input type="text" data-answer="hungry" placeholder="____"> though.</div>
      <div class="gap-fill">2. Do you want a <input type="text" data-answer="muffin" placeholder="____"> ?</div>
      <div class="gap-fill">3. Let me put the <input type="text" data-answer="kettle" placeholder="____"> on.</div>
      <div class="gap-fill">4. There is milk in the <input type="text" data-answer="fridge" placeholder="____"> .</div>
      <div class="gap-fill">5. These muffins are really <input type="text" data-answer="good" placeholder="____"> .</div>
      <button class="listening-check-btn" onclick="checkAllGaps(this)">âœ… ç­”ãˆã‚’ç¢ºèª</button>
      <div class="listening-answer" id="gap-answer-a">
        <strong>ç­”ãˆ:</strong> 1. <strong>hungry</strong> 2. <strong>muffin</strong> 3. <strong>kettle</strong> 4. <strong>fridge</strong> 5. <strong>good</strong>
      </div>
      <button class="listening-script-toggle" onclick="toggleScript(this)">ğŸ“ ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’è¦‹ã‚‹</button>
      <div class="listening-script">
        Good morning! Did you sleep well? Yes, I did.<br>
        I am a bit hungry though.<br>
        Me too.<br>
        Do you want a muffin? I bought some yesterday.<br>
        Blueberry? Yes, your favourite! Let me put the kettle on.<br>
        Great.<br>
        I will have tea this morning.<br>
        There is milk in the fridge.<br>
        Thanks! These muffins are really good.
      </div>
    </div>

    <!-- Part B -->
    <div class="listening-box">
      <h4>ğŸ”Š Part B: ã‚«ãƒ•ã‚§ã®æ–°ã—ã„ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ç´¹ä»‹ï¼ˆå†…å®¹ç†è§£ï¼‰</h4>
      <p class="listening-instruction">éŸ³å£°ã‚’è´ã„ã¦ã‹ã‚‰ã€è³ªå•ã«ç­”ãˆã¦ã¿ã‚ˆã†ã€‚å…ˆã«è³ªå•ã‚’èª­ã‚“ã§ã‹ã‚‰è´ãã®ã‚‚OKï¼</p>
      <div style="display:flex;align-items:center;gap:0.5rem;flex-wrap:wrap;margin-bottom:0.8rem;">
        <button class="tts-btn" onclick="speakText('listening-b-tts', this)">ğŸ”Š å†ç”Ÿ</button>
        <span class="tts-speed">é€Ÿåº¦: <select id="speed-b" onchange="currentSpeed=parseFloat(this.value)">
          <option value="0.7">ğŸ¢ ã‚†ã£ãã‚Š</option>
          <option value="0.85" selected>æ™®é€š</option>
          <option value="1">é€Ÿã„</option>
        </select></span>
        <span class="repeat-count" id="repeat-b">å†ç”Ÿå›æ•°: 0</span>
      </div>
      <div id="listening-b-tts" style="display:none">Hello everyone, welcome to our cafÃ©. I want to tell you about our new breakfast menu. Starting next Monday, we will have three new muffin flavours: blueberry, raspberry, and lemon poppy seed. All muffins are baked fresh every morning before six o&#x27;clock. We also have a new deal. If you buy a muffin and a coffee together, you save two dollars. The deal is available every day before nine in the morning. We hope you enjoy our new menu!</div>

      <div class="quiz-question" style="margin-top:0.5rem;">Q1: æ–°ã—ã„ãƒãƒ•ã‚£ãƒ³ã®ãƒ•ãƒ¬ãƒ¼ãƒãƒ¼ã¯ä½•ç¨®é¡ã§ã™ã‹ï¼Ÿ</div>
      <div class="quiz-options">
        <div class="quiz-option" onclick="checkQuiz(this, false)">2ç¨®é¡</div>
        <div class="quiz-option" onclick="checkQuiz(this, true)">3ç¨®é¡</div>
        <div class="quiz-option" onclick="checkQuiz(this, false)">4ç¨®é¡</div>
      </div>
      <div class="quiz-feedback correct">â­• æ­£è§£ï¼æ­£è§£ï¼blueberry, raspberry, lemon poppy seed ã®3ç¨®é¡ã€‚</div>
      <div class="quiz-feedback wrong">âŒ &quot;three new muffin flavours&quot; ã‚’è´ãé€ƒã—ã¦ã„ã¾ã›ã‚“ã‹ï¼Ÿ</div>

      <div class="quiz-question" style="margin-top:1.2rem;">Q2: ãƒãƒ•ã‚£ãƒ³ã¯æ¯æœä½•æ™‚å‰ã«ç„¼ã‹ã‚Œã¾ã™ã‹ï¼Ÿ</div>
      <div class="quiz-options">
        <div class="quiz-option" onclick="checkQuiz(this, false)">5æ™‚å‰</div>
        <div class="quiz-option" onclick="checkQuiz(this, true)">6æ™‚å‰</div>
        <div class="quiz-option" onclick="checkQuiz(this, false)">7æ™‚å‰</div>
      </div>
      <div class="quiz-feedback correct">â­• æ­£è§£ï¼æ­£è§£ï¼&quot;baked fresh every morning before six o&#x27;clock.&quot;</div>
      <div class="quiz-feedback wrong">âŒ &quot;before&quot; ã®å¾Œã®æ™‚é–“ã«æ³¨ç›®ï¼</div>

      <div class="quiz-question" style="margin-top:1.2rem;">Q3: ãƒãƒ•ã‚£ãƒ³ã¨ã‚³ãƒ¼ãƒ’ãƒ¼ã®ã‚»ãƒƒãƒˆå‰²å¼•ã¯ã„ãã‚‰ã§ã™ã‹ï¼Ÿ</div>
      <div class="quiz-options">
        <div class="quiz-option" onclick="checkQuiz(this, false)">1ãƒ‰ãƒ«å¼•ã</div>
        <div class="quiz-option" onclick="checkQuiz(this, true)">2ãƒ‰ãƒ«å¼•ã</div>
        <div class="quiz-option" onclick="checkQuiz(this, false)">3ãƒ‰ãƒ«å¼•ã</div>
      </div>
      <div class="quiz-feedback correct">â­• æ­£è§£ï¼æ­£è§£ï¼&quot;you save two dollars.&quot;</div>
      <div class="quiz-feedback wrong">âŒ &quot;save&quot; ã®å¾Œã®é‡‘é¡ã‚’ã‚‚ã†ä¸€å›è´ã„ã¦ã¿ã‚ˆã†ï¼</div>

      <button class="listening-script-toggle" onclick="toggleScript(this)" style="margin-top:0.8rem;">ğŸ“ ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’è¦‹ã‚‹</button>
      <div class="listening-script">
        Hello everyone, welcome to our cafÃ©.<br>
        I want to tell you about our new breakfast menu.<br>
        Starting next Monday, we will have three new muffin flavours: blueberry, raspberry, and lemon poppy seed.<br>
        All muffins are baked fresh every morning before six o&#x27;clock.<br>
        We also have a new deal.<br>
        If you buy a muffin and a coffee together, you save two dollars.<br>
        The deal is available every day before nine in the morning.<br>
        We hope you enjoy our new menu!
      </div>
    </div>
  </div>
</div>

<div class="section-card sec-pronun" data-index="8">
  <div class="section-header" onclick="toggleSection(this)">
    <div class="section-number">9</div>
    <div class="section-title"><div class="label">ğŸ¤ Pronunciation Check</div><div class="name">ç™ºéŸ³ãƒã‚§ãƒƒã‚¯ã«æŒ‘æˆ¦ã—ã‚ˆã†</div></div>
    <div class="section-chevron">â–¾</div>
  </div>
  <div class="section-body">
    <div class="yamada-comment">
      <img src="assets/ryosuke.jpg" alt="Ryosuke" style="width:36px;height:36px;border-radius:50%;object-fit:cover;flex-shrink:0;box-shadow:0 2px 8px rgba(194,24,91,0.3);">
      <div class="yamada-text">
        <div class="yamada-name">Ryosuke</div>
        want to ãŒã€Œã‚¦ã‚©ãƒŠã€ã«ãªã‚‹ã®ã€ãƒã‚¤ãƒ†ã‚£ãƒ–ã£ã½ã„ï¼ã“ã†ã„ã†çœç•¥å½¢ã‚’è¦šãˆã‚‹ã¨è‡ªç„¶ã«èã“ãˆã‚‹ã‚ˆã€‚Snow Manã®è‹±èªã®æ­Œè©ã§ã‚‚ã“ã†ã„ã†ç™ºéŸ³å¤šã„ã§ã—ã‚‡ï¼Ÿ
      </div>
    </div>

    <div class="pronun-box">
      <h4>ğŸ¤ æ–‡ã‚’å£°ã«å‡ºã—ã¦èª­ã‚“ã§ã¿ã‚ˆã†</h4>
      <p style="font-size:0.85rem;color:var(--text-light);margin-bottom:0.5rem;">ãƒã‚¤ã‚¯ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã€è¡¨ç¤ºã•ã‚ŒãŸæ–‡ã‚’èª­ã¿ä¸Šã’ã¦ãã ã•ã„ã€‚éŸ³å£°èªè­˜ã§ã‚ãªãŸã®ç™ºéŸ³ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚</p>

      <div class="pronun-sentence" id="pronun-target"></div>

      <div style="display:flex;align-items:center;gap:0.8rem;flex-wrap:wrap;">
        <button class="pronun-record-btn" id="pronun-btn" onclick="togglePronunRecording()">
          ğŸ¤ éŒ²éŸ³ã‚¹ã‚¿ãƒ¼ãƒˆ
        </button>
        <button class="tts-btn" onclick="speakPronunSentence()" style="background:var(--navy);">ğŸ”Š ãŠæ‰‹æœ¬ã‚’è´ã</button>
      </div>

      <div class="pronun-result" id="pronun-result">
        <div class="pronun-score">
          <div class="pronun-score-circle" id="pronun-score-circle">-</div>
          <div>
            <div style="font-weight:700;color:var(--navy);" id="pronun-score-label">åˆ¤å®šä¸­...</div>
            <div style="font-size:0.75rem;color:var(--text-light);" id="pronun-score-detail"></div>
          </div>
        </div>
        <div class="pronun-heard" id="pronun-heard"></div>
        <ul class="pronun-tips" id="pronun-tips"></ul>
      </div>

      <div class="pronun-nav">
        <button class="pronun-nav-btn" id="pronun-prev" onclick="changePronunSentence(-1)">â† å‰ã®æ–‡</button>
        <span class="pronun-counter" id="pronun-counter">1 / 5</span>
        <button class="pronun-nav-btn" id="pronun-next" onclick="changePronunSentence(1)">æ¬¡ã®æ–‡ â†’</button>
      </div>

      <div class="pronun-browser-note">
        ğŸ’¡ Chromeæ¨å¥¨ã€‚ãƒã‚¤ã‚¯ã®è¨±å¯ãŒå¿…è¦ã§ã™ã€‚é™ã‹ãªå ´æ‰€ã§ã€ã¯ã£ãã‚Šå£°ã«å‡ºã—ã¦èª­ã‚“ã§ãã ã•ã„ã€‚
      </div>
    </div>
  </div>
</div>
<script>
const pronunSentences = [{"text": "The usual today?", "tip": "usual ã¯ã€Œãƒ¦ãƒ¼ã‚¸ãƒ¥ã‚¢ãƒ«ã€ã€‚the usual ãŒã€Œã‚¶ãƒ¦ãƒ¼ã‚¸ãƒ¥ã‚¢ãƒ«ã€ã¨ã¤ãªãŒã‚Šã¾ã™ã€‚ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ã«èã“ãˆã‚‹ãƒ•ãƒ¬ãƒ¼ã‚ºã€‚"}, {"text": "Fresh out of the oven.", "tip": "out of ãŒã€Œã‚¢ã‚¦ãƒˆã‚©ãƒ–ã€ã¨ã¤ãªãŒã‚Šã¾ã™ã€‚oven ã¯ã€Œã‚¢ãƒ´ãƒ³ã€ã§ v ã®éŸ³ã‚’ã—ã£ã‹ã‚Šã€‚"}, {"text": "Can I sit by the window?", "tip": "Can I ãŒã€Œã‚­ãƒ£ãƒŠã‚¤ã€ã€‚sit by ãŒã€Œã‚·ãƒƒãƒã‚¤ã€ã¨è»½ãã¤ãªãŒã‚Šã¾ã™ã€‚window ã¯ã€Œã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã€ã€‚"}, {"text": "I want to try something different.", "tip": "want to ãŒã€Œã‚¦ã‚©ãƒŠã€ã¨çŸ­ãã€‚something ã® th ã¯èˆŒã‚’è»½ãæ­¯ã®é–“ã«ã€‚"}, {"text": "That table is free.", "tip": "That table ãŒã€Œã‚¶ãƒƒãƒ†ã‚¤ãƒ–ãƒ«ã€ã€‚free ã® f ã¯ä¸‹å”‡ã‚’è»½ãå™›ã‚“ã§ã€‚"}];
</script>

<div class="section-card sec-tryit" data-index="9">
  <div class="section-header" onclick="toggleSection(this)">
    <div class="section-number">10</div>
    <div class="section-title"><div class="label">âœï¸ Try It!</div><div class="name">ä»Šæ—¥ã®ã“ã¨ã‚’3è¡Œã§æ›¸ã„ã¦ã¿ã‚ˆã†</div></div>
    <div class="section-chevron">â–¾</div>
  </div>
  <div class="section-body">
    <div class="yamada-comment">
      <img src="assets/ryosuke.jpg" alt="Ryosuke" style="width:36px;height:36px;border-radius:50%;object-fit:cover;flex-shrink:0;box-shadow:0 2px 8px rgba(194,24,91,0.3);">
      <div class="yamada-text">
        <div class="yamada-name">Ryosuke</div>
        æœã”ã¯ã‚“ã®ã“ã¨ãªã‚‰æ›¸ãã‚„ã™ã„ã‚ˆã­ã€‚æ¯æ—¥ã®ã“ã¨ã ã‹ã‚‰è‹±èªã«ã—ã‚„ã™ã„ã€‚ä¿ºã‚‚æœé£Ÿã¯ã—ã£ã‹ã‚Šé£Ÿã¹ã‚‹æ´¾ï¼ã‚¨ãƒãƒ«ã‚®ãƒ¼å¤§äº‹ï¼
      </div>
    </div>
    <div class="try-it-box">
      <h4>âœï¸ æœã”ã¯ã‚“ã«ä½•ã‚’é£Ÿã¹ãŸã‹ï¼ˆã¾ãŸã¯é£Ÿã¹ãŸã„ã‹ï¼‰è‹±èªã§3è¡Œæ›¸ã„ã¦ã¿ã‚ˆã†</h4>
      <p>ğŸ’¡ ä»Šæ—¥ã®ä¼šè©±ã‚„æ–‡ã‚’ãƒãƒã—ã¦OKï¼ã‚ã‹ã‚‰ãªã„è‹±èªã¯æ—¥æœ¬èªã®ã¾ã¾ã§å¤§ä¸ˆå¤«ã€‚</p>
      <p><strong>ä¾‹:</strong> This morning I had a blueberry muffin at the cafÃ©. It was soft and warm. I also had a long black coffee. It was a great start to the day!</p>
      <textarea class="try-it-textarea" id="tryit-text" placeholder="ã“ã“ã«è‹±èªã§æ›¸ã„ã¦ã¿ã‚ˆã†..."></textarea>
    </div>
  </div>
</div>

<div class="section-card sec-summary" data-index="10">
  <div class="section-header" onclick="toggleSection(this)">
    <div class="section-number">11</div>
    <div class="section-title"><div class="label">ğŸ“Š Summary</div><div class="name">å­¦ç¿’ã‚µãƒãƒªãƒ¼</div></div>
    <div class="section-chevron">â–¾</div>
  </div>
  <div class="section-body">
    <div class="summary-box">
      <p style="font-size:0.85rem;color:var(--text-light);margin-bottom:0.8rem;">ChatGPTã‚„Claudeã«ã‚³ãƒ”ãƒšã—ã¦è§£èª¬ã‚’ã‚‚ã‚‰ãŠã†</p>
      <button class="summary-btn" onclick="generateSummary()">ğŸ“‹ ã‚µãƒãƒªãƒ¼ã‚’ç”Ÿæˆã™ã‚‹</button>
      <div class="summary-output" id="summary-output"></div>
      <div class="action-row" style="justify-content:center;margin-top:0.5rem;">
        <button class="action-btn" onclick="copySummary()">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>
        <a class="action-btn" href="https://chat.openai.com" target="_blank">ğŸ¤– ChatGPT</a>
        <a class="action-btn" href="https://claude.ai" target="_blank">ğŸ¤– Claude</a>
      </div>
    </div>
  </div>
</div>

<div class="day-nav">
  <a class="nav-btn" href="day14.html">â† Day 14</a>
  <a class="home-btn" href="index.html">ğŸ  ãƒ›ãƒ¼ãƒ </a>
  <a class="nav-btn" href="day16.html">Day 16 â†’</a>
</div>

</div>

<script>
let currentSpeed = 0.85;
let repeatCounts = {};

function toggleSection(header) {
  const card = header.parentElement;
  card.classList.toggle('open');
  const index = parseInt(card.dataset.index);
  const dots = document.querySelectorAll('.progress-dot');
  if (card.classList.contains('open')) {
    dots[index].classList.add('active');
    for (let i = 0; i < index; i++) { dots[i].classList.add('complete'); dots[i].classList.remove('active'); }
  }
  const openCards = document.querySelectorAll('.section-card.open');
  document.querySelector('.progress-label').textContent = openCards.length + ' / 11 ã‚»ã‚¯ã‚·ãƒ§ãƒ³';
}

function toggleVocab(btn) {
  const list = btn.nextElementSibling;
  list.classList.toggle('show');
  btn.textContent = list.classList.contains('show') ? 'ğŸ“š å˜èªãƒªã‚¹ãƒˆã‚’éš ã™' : 'ğŸ“š å˜èªãƒªã‚¹ãƒˆã‚’è¦‹ã‚‹';
}

function checkQuiz(option, isCorrect) {
  const parent = option.parentElement;
  if (parent.dataset.answered) return;
  parent.dataset.answered = 'true';
  const allOptions = parent.querySelectorAll('.quiz-option');
  allOptions.forEach(opt => opt.style.pointerEvents = 'none');
  if (isCorrect) {
    option.classList.add('correct');
    parent.nextElementSibling.classList.add('show');
  } else {
    option.classList.add('wrong');
    parent.nextElementSibling.nextElementSibling.classList.add('show');
  }
}

// Web Speech API TTS
function speakText(elementId, btn) {
  if (window.speechSynthesis.speaking) {
    window.speechSynthesis.cancel();
    btn.textContent = 'ğŸ”Š å†ç”Ÿ';
    btn.classList.remove('playing');
    return;
  }
  const text = document.getElementById(elementId).textContent;
  const utterance = new SpeechSynthesisUtterance(text);
  utterance.lang = 'en-AU';
  utterance.rate = currentSpeed;
  utterance.pitch = 1;

  const voices = window.speechSynthesis.getVoices();
  const enVoice = voices.find(v => v.lang.startsWith('en-AU')) ||
                  voices.find(v => v.lang.startsWith('en-GB')) ||
                  voices.find(v => v.lang.startsWith('en'));
  if (enVoice) utterance.voice = enVoice;

  btn.textContent = 'â¹ åœæ­¢';
  btn.classList.add('playing');

  if (!repeatCounts[elementId]) repeatCounts[elementId] = 0;
  repeatCounts[elementId]++;
  const repeatEl = btn.parentElement.querySelector('.repeat-count');
  if (repeatEl) repeatEl.textContent = 'å†ç”Ÿå›æ•°: ' + repeatCounts[elementId];

  utterance.onend = () => { btn.textContent = 'ğŸ”Š å†ç”Ÿ'; btn.classList.remove('playing'); };
  utterance.onerror = () => { btn.textContent = 'ğŸ”Š å†ç”Ÿ'; btn.classList.remove('playing'); };
  window.speechSynthesis.speak(utterance);
}

window.speechSynthesis.onvoiceschanged = () => window.speechSynthesis.getVoices();

function checkAllGaps(btn) {
  const box = btn.closest('.listening-box');
  const inputs = box.querySelectorAll('input[data-answer]');
  inputs.forEach(input => {
    const correct = input.dataset.answer.toLowerCase();
    const val = input.value.trim().toLowerCase();
    input.classList.remove('correct-input', 'wrong-input');
    if (val === correct) { input.classList.add('correct-input'); }
    else { input.classList.add('wrong-input'); }
  });
  const answer = box.querySelector('.listening-answer');
  if (answer) answer.classList.add('show');
}

function toggleScript(btn) {
  const script = btn.nextElementSibling;
  script.classList.toggle('show');
  btn.textContent = script.classList.contains('show') ? 'ğŸ“ ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’éš ã™' : 'ğŸ“ ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’è¦‹ã‚‹';
}

function copyText(id) {
  const text = document.getElementById(id).textContent;
  navigator.clipboard.writeText(text).then(() => alert('ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼'));
}

function generateSummary() {
  const checked = document.querySelectorAll('.vocab-item.checked');
  const vocabList = Array.from(checked).map(i => i.querySelector('.vocab-en').textContent);
  const tryIt = document.getElementById('tryit-text').value;
  const listeningPlays = Object.entries(repeatCounts).map(([k,v]) => k + ': ' + v + 'å›').join(', ');

  let s = `ã€Day 15: Blueberry Muffin å­¦ç¿’ã‚µãƒãƒªãƒ¼ã€‘\n\n`;
  s += `â–  ãƒã‚§ãƒƒã‚¯ã—ãŸå˜èª (${vocabList.length}å€‹):\n${vocabList.length > 0 ? vocabList.join(', ') : 'ãªã—'}\n\n`;
  s += `â–  ãƒªã‚¹ãƒ‹ãƒ³ã‚°å†ç”Ÿå›æ•°:\n${listeningPlays || 'æœªå†ç”Ÿ'}\n\n`;

  const pronunSummary = pronunResults.filter(r => r).map((r, i) =>
    `  ${i+1}. "${r.target}" â†’ ${r.score}% (èªè­˜: "${r.heard}")`
  ).join('\n');
  s += `â–  ç™ºéŸ³ãƒã‚§ãƒƒã‚¯çµæœ:\n${pronunSummary || '(æœªå®Ÿæ–½)'}\n\n`;

  s += `â–  Today's Writing:\n${tryIt || '(æœªè¨˜å…¥)'}\n\n`;
  s += `---\nä¸Šã®å†…å®¹ã‚’ã‚‚ã¨ã«ã€ä»¥ä¸‹ã‚’æ•™ãˆã¦ãã ã•ã„ï¼š\n1. ãƒã‚§ãƒƒã‚¯ã—ãŸå˜èªã®ä½¿ã„æ–¹ï¼ˆä¾‹æ–‡ä»˜ãï¼‰\n2. ç™ºéŸ³ãƒã‚§ãƒƒã‚¯ã§é–“é•ãˆãŸéƒ¨åˆ†ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹\n3. Today's Writingã®æ·»å‰Š\n4. ä»Šæ—¥å­¦ã‚“ã ãƒ•ãƒ¬ãƒ¼ã‚ºã®ç™ºå±•è¡¨ç¾`;

  const output = document.getElementById('summary-output');
  output.textContent = s;
  output.classList.add('show');
}

function copySummary() {
  const text = document.getElementById('summary-output').textContent;
  navigator.clipboard.writeText(text).then(() => alert('ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼'));
}

document.querySelectorAll('.progress-dot').forEach(dot => {
  dot.addEventListener('click', () => {
    const index = parseInt(dot.dataset.section);
    const cards = document.querySelectorAll('.section-card');
    if (cards[index]) {
      cards[index].scrollIntoView({ behavior: 'smooth', block: 'start' });
      if (!cards[index].classList.contains('open')) toggleSection(cards[index].querySelector('.section-header'));
    }
  });
});

// ===== PRONUNCIATION CHECK =====
// pronunSentences is defined in the HTML before this script

let currentPronunIndex = 0;
let pronunResults = [];
let pronunRecognition = null;
let isRecording = false;

function initPronun() {
  renderPronunSentence();
  updatePronunNav();
}

function renderPronunSentence() {
  const target = document.getElementById('pronun-target');
  const sentence = pronunSentences[currentPronunIndex];
  const words = sentence.text.split(' ');
  target.innerHTML = words.map((w, i) => `<span class="word" data-index="${i}">${w}</span>`).join(' ');

  const result = document.getElementById('pronun-result');
  result.classList.remove('show', 'good', 'needs-work', 'try-again');
}

function updatePronunNav() {
  document.getElementById('pronun-counter').textContent =
    `${currentPronunIndex + 1} / ${pronunSentences.length}`;
  document.getElementById('pronun-prev').classList.toggle('disabled', currentPronunIndex === 0);
  document.getElementById('pronun-next').classList.toggle('disabled', currentPronunIndex === pronunSentences.length - 1);
}

function changePronunSentence(dir) {
  const newIndex = currentPronunIndex + dir;
  if (newIndex < 0 || newIndex >= pronunSentences.length) return;
  currentPronunIndex = newIndex;
  renderPronunSentence();
  updatePronunNav();
}

function speakPronunSentence() {
  if (window.speechSynthesis.speaking) {
    window.speechSynthesis.cancel();
    return;
  }
  const text = pronunSentences[currentPronunIndex].text;
  const utterance = new SpeechSynthesisUtterance(text);
  utterance.lang = 'en-AU';
  utterance.rate = 0.85;
  const voices = window.speechSynthesis.getVoices();
  const enVoice = voices.find(v => v.lang.startsWith('en-AU')) ||
                  voices.find(v => v.lang.startsWith('en-GB')) ||
                  voices.find(v => v.lang.startsWith('en'));
  if (enVoice) utterance.voice = enVoice;
  window.speechSynthesis.speak(utterance);
}

function togglePronunRecording() {
  if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
    alert('ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯éŸ³å£°èªè­˜ã«å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚Chrome ã‚’ãŠä½¿ã„ãã ã•ã„ã€‚');
    return;
  }

  if (isRecording) {
    stopPronunRecording();
    return;
  }

  const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
  pronunRecognition = new SpeechRecognition();
  pronunRecognition.lang = 'en-AU';
  pronunRecognition.interimResults = false;
  pronunRecognition.maxAlternatives = 3;
  pronunRecognition.continuous = false;

  const btn = document.getElementById('pronun-btn');
  btn.textContent = 'â¹ éŒ²éŸ³ä¸­...';
  btn.classList.add('recording');
  isRecording = true;

  pronunRecognition.onresult = (event) => {
    const results = event.results[0];
    const heard = results[0].transcript;
    const confidence = results[0].confidence;
    const alternatives = [];
    for (let i = 0; i < results.length; i++) {
      alternatives.push(results[i].transcript.toLowerCase());
    }
    evaluatePronunciation(heard, confidence, alternatives);
    stopPronunRecording();
  };

  pronunRecognition.onerror = (event) => {
    stopPronunRecording();
    if (event.error === 'no-speech') {
      alert('éŸ³å£°ãŒæ¤œå‡ºã•ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚ã‚‚ã†å°‘ã—å¤§ããªå£°ã§ã¯ã£ãã‚Šè©±ã—ã¦ã¿ã¦ãã ã•ã„ã€‚');
    } else if (event.error === 'not-allowed') {
      alert('ãƒã‚¤ã‚¯ã®ä½¿ç”¨ãŒè¨±å¯ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã§ãƒã‚¤ã‚¯ã‚’è¨±å¯ã—ã¦ãã ã•ã„ã€‚');
    } else {
      alert('éŸ³å£°èªè­˜ã‚¨ãƒ©ãƒ¼: ' + event.error);
    }
  };

  pronunRecognition.onend = () => {
    stopPronunRecording();
  };

  pronunRecognition.start();
}

function stopPronunRecording() {
  const btn = document.getElementById('pronun-btn');
  btn.textContent = 'ğŸ¤ ã‚‚ã†ä¸€å›';
  btn.classList.remove('recording');
  isRecording = false;
  if (pronunRecognition) {
    try { pronunRecognition.stop(); } catch(e) {}
  }
}

function normalizeText(text) {
  return text.toLowerCase()
    .replace(/[.,!?;:'"()\-]/g, '')
    .replace(/\s+/g, ' ')
    .trim();
}

function evaluatePronunciation(heard, confidence, alternatives) {
  const target = pronunSentences[currentPronunIndex].text;
  const tip = pronunSentences[currentPronunIndex].tip;

  const targetWords = normalizeText(target).split(' ');
  const heardWords = normalizeText(heard).split(' ');

  const allHeardWords = new Set();
  alternatives.forEach(alt => {
    normalizeText(alt).split(' ').forEach(w => allHeardWords.add(w));
  });

  let correctCount = 0;
  const wordElements = document.querySelectorAll('#pronun-target .word');

  targetWords.forEach((targetWord, i) => {
    const el = wordElements[i];
    if (!el) return;

    el.classList.remove('correct', 'wrong', 'missed');

    const targetClean = targetWord.toLowerCase();

    if (heardWords.includes(targetClean) || allHeardWords.has(targetClean)) {
      el.classList.add('correct');
      correctCount++;
    } else {
      const similar = heardWords.some(hw => levenshtein(hw, targetClean) <= 1) ||
                      [...allHeardWords].some(hw => levenshtein(hw, targetClean) <= 1);
      if (similar) {
        el.classList.add('correct');
        correctCount++;
      } else {
        el.classList.add('wrong');
      }
    }
  });

  const score = Math.round((correctCount / targetWords.length) * 100);

  pronunResults[currentPronunIndex] = { score, heard, target };

  const resultEl = document.getElementById('pronun-result');
  const scoreCircle = document.getElementById('pronun-score-circle');
  const scoreLabel = document.getElementById('pronun-score-label');
  const scoreDetail = document.getElementById('pronun-score-detail');
  const heardEl = document.getElementById('pronun-heard');
  const tipsEl = document.getElementById('pronun-tips');

  scoreCircle.textContent = score + '%';
  scoreCircle.classList.remove('high', 'mid', 'low');
  resultEl.classList.remove('good', 'needs-work', 'try-again');

  if (score >= 80) {
    scoreCircle.classList.add('high');
    scoreLabel.textContent = 'ğŸ‰ Great!';
    scoreDetail.textContent = 'ã—ã£ã‹ã‚Šé€šã˜ã‚‹ç™ºéŸ³ã§ã™ï¼';
    resultEl.classList.add('good');
  } else if (score >= 50) {
    scoreCircle.classList.add('mid');
    scoreLabel.textContent = 'ğŸ‘ Almost!';
    scoreDetail.textContent = 'ã‚‚ã†å°‘ã—ï¼èµ¤ã„å˜èªã‚’æ„è­˜ã—ã¦ã¿ã‚ˆã†ã€‚';
    resultEl.classList.add('needs-work');
  } else {
    scoreCircle.classList.add('low');
    scoreLabel.textContent = 'ğŸ’ª Keep trying!';
    scoreDetail.textContent = 'ãŠæ‰‹æœ¬ã‚’è´ã„ã¦ã‹ã‚‰ã‚‚ã†ä¸€å›ãƒãƒ£ãƒ¬ãƒ³ã‚¸ï¼';
    resultEl.classList.add('try-again');
  }

  heardEl.innerHTML = `<strong>ğŸ§ èªè­˜ã•ã‚ŒãŸéŸ³å£°:</strong> "${heard}"`;
  tipsEl.innerHTML = `<li>ğŸ’¡ ${tip}</li>`;

  const wrongWords = [];
  wordElements.forEach((el, i) => {
    if (el.classList.contains('wrong') && targetWords[i]) {
      wrongWords.push(targetWords[i]);
    }
  });
  if (wrongWords.length > 0) {
    tipsEl.innerHTML += `<li>ğŸ”´ èªè­˜ã•ã‚Œãªã‹ã£ãŸå˜èª: <strong>${wrongWords.join(', ')}</strong> â€” ã‚†ã£ãã‚Šã¯ã£ãã‚Šç™ºéŸ³ã—ã¦ã¿ã‚ˆã†</li>`;
  }

  resultEl.classList.add('show');
}

// Simple Levenshtein distance for fuzzy matching
function levenshtein(a, b) {
  if (a.length === 0) return b.length;
  if (b.length === 0) return a.length;
  const matrix = [];
  for (let i = 0; i <= b.length; i++) matrix[i] = [i];
  for (let j = 0; j <= a.length; j++) matrix[0][j] = j;
  for (let i = 1; i <= b.length; i++) {
    for (let j = 1; j <= a.length; j++) {
      if (b.charAt(i - 1) === a.charAt(j - 1)) {
        matrix[i][j] = matrix[i - 1][j - 1];
      } else {
        matrix[i][j] = Math.min(
          matrix[i - 1][j - 1] + 1,
          matrix[i][j - 1] + 1,
          matrix[i - 1][j] + 1
        );
      }
    }
  }
  return matrix[b.length][a.length];
}

document.addEventListener('DOMContentLoaded', initPronun);
</script>
</body>
</html>