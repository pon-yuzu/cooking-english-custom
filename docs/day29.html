<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ¥­ Day 29: Mango Sorbet â€” Cooking English Custom</title>
<link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;500;700&family=Quicksand:wght@400;500;600;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
<style>
:root {
  --primary: #E8792F;
  --primary-light: #FDF0E6;
  --primary-dark: #C45A1A;
  --navy: #1B3A5C;
  --blue: #2E75B6;
  --blue-light: #D6E8F7;
  --green: #4CAF50;
  --green-light: #E8F5E9;
  --purple: #7B1FA2;
  --purple-light: #F3E5F5;
  --listening-color: #00897B;
  --listening-light: #E0F2F1;
  --bg: #FAFAF7;
  --card-bg: #FFFFFF;
  --text: #333333;
  --text-light: #666666;
  --border: #E8E5DF;
  --shadow: 0 2px 12px rgba(27,58,92,0.08);
  --shadow-hover: 0 4px 20px rgba(27,58,92,0.14);
  --radius: 16px;
  --radius-sm: 10px;
  --yamada-bg: linear-gradient(135deg, #FFF5F5 0%, #FFF0F5 50%, #F5F0FF 100%);
  --yamada-border: #E8B4B8;
  --yamada-accent: #C2185B;
  --pronun-color: #E65100;
  --pronun-light: #FFF3E0;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: 'Noto Sans JP', 'Zen Maru Gothic', sans-serif;
  background: var(--bg);
  color: var(--text);
  line-height: 1.8;
  min-height: 100vh;
}

.header {
  background: linear-gradient(135deg, var(--navy) 0%, #2A5080 100%);
  color: white;
  padding: 2rem 1.5rem 1.5rem;
  text-align: center;
  position: relative;
  overflow: hidden;
}
.header::before {
  content: '';
  position: absolute;
  top: -50%;
  right: -20%;
  width: 300px;
  height: 300px;
  background: radial-gradient(circle, rgba(232,121,47,0.15) 0%, transparent 70%);
  border-radius: 50%;
}
.header-badge {
  display: inline-block;
  background: rgba(255,255,255,0.15);
  backdrop-filter: blur(10px);
  padding: 0.3rem 1rem;
  border-radius: 20px;
  font-size: 0.75rem;
  font-family: 'Quicksand', sans-serif;
  font-weight: 600;
  letter-spacing: 0.05em;
  margin-bottom: 0.8rem;
  border: 1px solid rgba(255,255,255,0.2);
}
.header h1 {
  font-family: 'Quicksand', sans-serif;
  font-size: 2rem;
  font-weight: 700;
  margin-bottom: 0.3rem;
}
.header p { font-size: 0.85rem; opacity: 0.8; }

.progress-bar {
  background: white;
  padding: 1rem 1.5rem;
  border-bottom: 1px solid var(--border);
  position: sticky;
  top: 0;
  z-index: 100;
  box-shadow: 0 2px 8px rgba(0,0,0,0.04);
}
.progress-dots { display: flex; gap: 4px; justify-content: center; align-items: center; }
.progress-dot {
  width: 28px; height: 6px; border-radius: 3px;
  background: var(--border); transition: all 0.3s; cursor: pointer;
}
.progress-dot.active { background: var(--primary); }
.progress-dot.complete { background: var(--green); }
.progress-label {
  text-align: center; font-size: 0.7rem; color: var(--text-light);
  margin-top: 0.4rem; font-family: 'Quicksand', sans-serif; font-weight: 600;
}

.main { max-width: 640px; margin: 0 auto; padding: 1rem 1rem 4rem; }

.section-card {
  background: var(--card-bg); border-radius: var(--radius);
  margin-bottom: 1.2rem; box-shadow: var(--shadow);
  overflow: hidden; border: 1px solid var(--border);
  transition: box-shadow 0.3s;
  animation: fadeIn 0.4s ease both;
}
.section-card:hover { box-shadow: var(--shadow-hover); }
.section-card:nth-child(1) { animation-delay: 0.05s; }
.section-card:nth-child(2) { animation-delay: 0.1s; }
.section-card:nth-child(3) { animation-delay: 0.15s; }
.section-card:nth-child(4) { animation-delay: 0.2s; }
.section-card:nth-child(5) { animation-delay: 0.25s; }
.section-card:nth-child(6) { animation-delay: 0.3s; }
.section-card:nth-child(7) { animation-delay: 0.35s; }
.section-card:nth-child(8) { animation-delay: 0.4s; }
.section-card:nth-child(9) { animation-delay: 0.45s; }
.section-card:nth-child(10) { animation-delay: 0.5s; }

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}

.section-header {
  display: flex; align-items: center; gap: 0.8rem;
  padding: 1rem 1.2rem; cursor: pointer; user-select: none;
  transition: background 0.2s;
}
.section-header:hover { background: rgba(0,0,0,0.02); }
.section-number {
  width: 32px; height: 32px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-family: 'Quicksand', sans-serif; font-weight: 700;
  font-size: 0.85rem; color: white; flex-shrink: 0;
}
.section-title { flex: 1; }
.section-title .label {
  font-size: 0.65rem; font-family: 'Quicksand', sans-serif;
  font-weight: 700; text-transform: uppercase;
  letter-spacing: 0.08em; opacity: 0.7;
}
.section-title .name { font-size: 1rem; font-weight: 700; }
.section-chevron { font-size: 1.2rem; transition: transform 0.3s; opacity: 0.4; }
.section-card.open .section-chevron { transform: rotate(180deg); }
.section-body { padding: 0 1.2rem 1.2rem; display: none; }
.section-card.open .section-body { display: block; }

.yamada-comment {
  background: var(--yamada-bg); border: 1px solid var(--yamada-border);
  border-radius: var(--radius-sm); padding: 0.8rem 1rem;
  margin-bottom: 1rem; display: flex; gap: 0.6rem;
  align-items: flex-start; font-size: 0.85rem; line-height: 1.6;
}
.yamada-text { flex: 1; }
.yamada-name {
  font-size: 0.7rem; font-weight: 700; color: var(--yamada-accent);
  font-family: 'Quicksand', sans-serif; margin-bottom: 0.15rem;
}

.recipe-box {
  background: #FFFDF9; border: 1px solid #F0E8D8;
  border-radius: var(--radius-sm); padding: 1.2rem; margin-bottom: 1rem;
}
.recipe-box h3 { font-family: 'Quicksand', sans-serif; font-size: 1.1rem; color: var(--navy); margin-bottom: 0.8rem; }
.recipe-box .ingredients {
  font-size: 0.85rem; color: var(--text-light); margin-bottom: 1rem;
  padding: 0.6rem; background: rgba(232,121,47,0.05); border-radius: 8px;
}
.recipe-box .ingredients strong { color: var(--primary-dark); }
.recipe-steps { counter-reset: step; list-style: none; }
.recipe-steps li {
  counter-increment: step; padding: 0.5rem 0 0.5rem 2.2rem;
  position: relative; font-size: 0.9rem; border-bottom: 1px solid #F5F0E8;
}
.recipe-steps li:last-child { border-bottom: none; }
.recipe-steps li::before {
  content: counter(step); position: absolute; left: 0; top: 0.5rem;
  width: 24px; height: 24px; background: var(--primary); color: white;
  border-radius: 50%; font-size: 0.75rem; font-family: 'Quicksand', sans-serif;
  font-weight: 700; display: flex; align-items: center; justify-content: center;
}
.recipe-steps li strong { color: var(--navy); }

.action-row { display: flex; gap: 0.5rem; margin: 0.8rem 0; flex-wrap: wrap; }
.action-btn {
  display: inline-flex; align-items: center; gap: 0.3rem;
  padding: 0.4rem 0.8rem; border: 1px solid var(--border);
  border-radius: 20px; font-size: 0.75rem; background: white;
  cursor: pointer; transition: all 0.2s; font-family: 'Noto Sans JP', sans-serif;
  color: var(--text-light); text-decoration: none;
}
.action-btn:hover { background: var(--blue-light); border-color: var(--blue); color: var(--navy); }

.vocab-toggle {
  display: inline-flex; align-items: center; gap: 0.3rem;
  padding: 0.4rem 0.8rem; border: 1px solid var(--border);
  border-radius: 20px; font-size: 0.75rem; background: white;
  cursor: pointer; transition: all 0.2s; color: var(--text-light); margin-bottom: 0.5rem;
}
.vocab-toggle:hover { background: var(--green-light); border-color: var(--green); }
.vocab-list { display: none; margin-top: 0.5rem; }
.vocab-list.show { display: block; }
.vocab-item {
  display: flex; align-items: center; gap: 0.8rem;
  padding: 0.5rem 0.8rem; border-radius: 8px; font-size: 0.85rem;
  transition: background 0.2s; cursor: pointer;
}
.vocab-item:hover { background: rgba(0,0,0,0.03); }
.vocab-check {
  width: 18px; height: 18px; border: 2px solid var(--border);
  border-radius: 4px; flex-shrink: 0; display: flex;
  align-items: center; justify-content: center;
  transition: all 0.2s; font-size: 0.7rem; color: transparent;
}
.vocab-item.checked .vocab-check { background: var(--primary); border-color: var(--primary); color: white; }
.vocab-en { font-weight: 700; color: var(--navy); min-width: 100px; }
.vocab-ja { color: var(--text-light); font-size: 0.8rem; }

.quiz-question { font-weight: 700; font-size: 0.95rem; margin-bottom: 0.8rem; color: var(--navy); padding-left: 0.3rem; }
.quiz-options { display: flex; flex-direction: column; gap: 0.5rem; }
.quiz-option {
  padding: 0.7rem 1rem; border: 2px solid var(--border);
  border-radius: var(--radius-sm); cursor: pointer; font-size: 0.9rem;
  transition: all 0.2s; background: white;
}
.quiz-option:hover { border-color: var(--blue); background: var(--blue-light); }
.quiz-option.correct { border-color: var(--green); background: var(--green-light); }
.quiz-option.wrong { border-color: #E53935; background: #FFEBEE; }
.quiz-feedback { margin-top: 0.8rem; padding: 0.6rem 0.8rem; border-radius: 8px; font-size: 0.85rem; display: none; }
.quiz-feedback.show { display: block; }
.quiz-feedback.correct { background: var(--green-light); color: #2E7D32; }
.quiz-feedback.wrong { background: #FFEBEE; color: #C62828; }

.review-card {
  background: linear-gradient(135deg, #FFFDF7 0%, #FFF8F0 100%);
  border: 1px solid #F0E0C8; border-radius: var(--radius-sm);
  padding: 1.2rem; margin-bottom: 1rem;
}
.review-header { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.6rem; }
.review-header h4 { font-family: 'Quicksand', sans-serif; font-size: 0.95rem; color: var(--navy); }
.review-stars { color: #F9A825; font-size: 0.9rem; }
.review-text { font-size: 0.9rem; line-height: 1.9; color: var(--text); }

.tips-box {
  background: linear-gradient(135deg, #F0F8FF 0%, #E8F5E9 100%);
  border: 1px solid #C8E6C9; border-radius: var(--radius-sm); padding: 1.2rem;
}
.tips-box p { font-size: 0.85rem; margin-bottom: 0.8rem; line-height: 1.8; }
.tips-box p:last-child { margin-bottom: 0; }

.conversation-scene {
  background: var(--blue-light); border-radius: var(--radius-sm);
  padding: 0.6rem 1rem; font-size: 0.8rem; color: var(--navy);
  margin-bottom: 1rem; font-weight: 500;
}
.convo-line { display: flex; gap: 0.6rem; margin-bottom: 0.6rem; align-items: flex-start; }
.convo-speaker { font-weight: 700; font-size: 0.8rem; min-width: 50px; padding-top: 0.1rem; flex-shrink: 0; }
.convo-speaker.you { color: var(--primary); }
.convo-speaker.emma { color: var(--blue); }
.convo-text { font-size: 0.9rem; }

/* ===== LISTENING ===== */
.listening-box {
  background: var(--listening-light); border: 1px solid #B2DFDB;
  border-radius: var(--radius-sm); padding: 1.2rem; margin-bottom: 1rem;
}
.listening-box h4 { font-family: 'Quicksand', sans-serif; color: var(--listening-color); font-size: 0.95rem; margin-bottom: 0.8rem; }
.listening-instruction { font-size: 0.85rem; color: var(--text-light); margin-bottom: 0.6rem; }

.tts-btn {
  display: inline-flex; align-items: center; gap: 0.4rem;
  padding: 0.5rem 1.2rem; background: var(--listening-color);
  color: white; border: none; border-radius: 20px;
  font-size: 0.8rem; font-family: 'Noto Sans JP', sans-serif;
  font-weight: 700; cursor: pointer; transition: all 0.2s;
  margin-bottom: 0.8rem;
}
.tts-btn:hover { background: #00695C; transform: translateY(-1px); }
.tts-btn.playing { background: #E53935; }
.tts-btn.playing:hover { background: #C62828; }

.tts-speed {
  display: inline-flex; align-items: center; gap: 0.3rem;
  margin-left: 0.5rem; font-size: 0.75rem; color: var(--text-light);
}
.tts-speed select {
  border: 1px solid var(--border); border-radius: 12px;
  padding: 0.2rem 0.4rem; font-size: 0.75rem;
  background: white; cursor: pointer;
}

.gap-fill { margin: 0.5rem 0; font-size: 0.9rem; line-height: 2.4; }
.gap-fill input {
  border: none; border-bottom: 2px solid var(--listening-color);
  background: rgba(0,137,123,0.05); border-radius: 4px 4px 0 0;
  padding: 0.1rem 0.3rem; font-size: 0.9rem;
  font-family: 'Quicksand', sans-serif; font-weight: 600;
  width: 100px; text-align: center; outline: none;
  color: var(--listening-color);
}
.gap-fill input:focus { border-bottom-color: var(--primary); background: rgba(232,121,47,0.08); }
.gap-fill input.correct-input { border-bottom-color: #4CAF50; background: rgba(76,175,80,0.1); }
.gap-fill input.wrong-input { border-bottom-color: #E53935; background: rgba(229,57,53,0.1); }

.listening-check-btn {
  display: inline-flex; align-items: center; gap: 0.4rem;
  padding: 0.5rem 1.2rem; background: var(--listening-color);
  color: white; border: none; border-radius: 20px;
  font-size: 0.8rem; font-family: 'Noto Sans JP', sans-serif;
  font-weight: 700; cursor: pointer; transition: all 0.2s; margin-top: 0.5rem;
}
.listening-check-btn:hover { background: #00695C; transform: translateY(-1px); }
.listening-answer {
  margin-top: 0.8rem; padding: 0.6rem 0.8rem; background: white;
  border-radius: 8px; font-size: 0.85rem; display: none; border: 1px solid #B2DFDB;
}
.listening-answer.show { display: block; }

.listening-script-toggle {
  display: inline-flex; align-items: center; gap: 0.3rem;
  padding: 0.4rem 0.8rem; border: 1px dashed var(--listening-color);
  border-radius: 20px; font-size: 0.75rem; background: white;
  cursor: pointer; color: var(--listening-color); margin-top: 0.5rem;
}
.listening-script { display: none; margin-top: 0.6rem; padding: 0.8rem; background: white; border-radius: 8px; font-size: 0.85rem; border: 1px solid #B2DFDB; line-height: 1.8; }
.listening-script.show { display: block; }

.try-it-box {
  background: var(--purple-light); border: 1px solid #CE93D8;
  border-radius: var(--radius-sm); padding: 1.2rem;
}
.try-it-box h4 { color: var(--purple); font-family: 'Quicksand', sans-serif; margin-bottom: 0.5rem; }
.try-it-box p { font-size: 0.85rem; margin-bottom: 0.6rem; }
.try-it-textarea {
  width: 100%; min-height: 100px; border: 1px solid #CE93D8;
  border-radius: 8px; padding: 0.8rem; font-size: 0.9rem;
  font-family: 'Noto Sans JP', sans-serif; line-height: 1.8;
  resize: vertical; outline: none; transition: border-color 0.2s;
}
.try-it-textarea:focus { border-color: var(--purple); }

.summary-box {
  background: white; border: 2px dashed var(--border);
  border-radius: var(--radius-sm); padding: 1.2rem; text-align: center;
}
.summary-btn {
  display: inline-flex; align-items: center; gap: 0.4rem;
  padding: 0.6rem 1.5rem; background: var(--navy); color: white;
  border: none; border-radius: 20px; font-size: 0.85rem;
  font-family: 'Noto Sans JP', sans-serif; font-weight: 700;
  cursor: pointer; transition: all 0.2s; margin-bottom: 0.5rem;
}
.summary-btn:hover { background: #2A5080; transform: translateY(-1px); }
.summary-output {
  margin-top: 0.8rem; text-align: left; font-size: 0.8rem;
  color: var(--text-light); padding: 0.8rem; background: #F5F5F5;
  border-radius: 8px; display: none; white-space: pre-wrap;
}
.summary-output.show { display: block; }

.day-nav {
  display: flex; justify-content: space-between; align-items: center;
  padding: 1rem 0; margin-top: 1rem; border-top: 1px solid var(--border);
}
.nav-btn {
  display: inline-flex; align-items: center; gap: 0.3rem;
  padding: 0.5rem 1rem; border: 1px solid var(--border);
  border-radius: 20px; font-size: 0.85rem; background: white;
  cursor: pointer; transition: all 0.2s; text-decoration: none;
  color: var(--text); font-family: 'Noto Sans JP', sans-serif;
}
.nav-btn:hover { background: var(--blue-light); border-color: var(--blue); }
.nav-btn.disabled { opacity: 0.4; pointer-events: none; }
.home-btn {
  padding: 0.5rem 1rem; background: var(--primary); color: white;
  border: none; border-radius: 20px; font-size: 0.8rem; cursor: pointer;
  text-decoration: none; font-family: 'Quicksand', sans-serif; font-weight: 700;
}

.sec-recipe .section-number { background: var(--primary); }
.sec-quiz1 .section-number { background: var(--blue); }
.sec-review .section-number { background: #F9A825; }
.sec-quiz2 .section-number { background: var(--blue); }
.sec-tips .section-number { background: var(--green); }
.sec-convo .section-number { background: var(--navy); }
.sec-quiz3 .section-number { background: var(--blue); }
.sec-listening .section-number { background: var(--listening-color); }
.sec-tryit .section-number { background: var(--purple); }
.sec-summary .section-number { background: var(--text-light); }
.sec-pronun .section-number { background: var(--pronun-color); }

/* ===== PRONUNCIATION CHECK ===== */
.pronun-box {
  background: var(--pronun-light);
  border: 1px solid #FFB74D;
  border-radius: var(--radius-sm);
  padding: 1.2rem;
  margin-bottom: 1rem;
}
.pronun-box h4 {
  font-family: 'Quicksand', sans-serif;
  color: var(--pronun-color);
  font-size: 0.95rem;
  margin-bottom: 0.6rem;
}
.pronun-sentence {
  background: white;
  border: 2px solid #FFB74D;
  border-radius: var(--radius-sm);
  padding: 1rem;
  margin: 0.8rem 0;
  font-size: 1.05rem;
  font-weight: 600;
  color: var(--navy);
  text-align: center;
  line-height: 1.8;
}
.pronun-sentence .word {
  display: inline-block;
  padding: 0.1rem 0.2rem;
  border-radius: 4px;
  transition: all 0.3s;
  margin: 0 1px;
}
.pronun-sentence .word.correct { background: rgba(76,175,80,0.2); color: #2E7D32; }
.pronun-sentence .word.wrong { background: rgba(229,57,53,0.2); color: #C62828; text-decoration: underline wavy #E53935; }
.pronun-sentence .word.missed { background: rgba(255,152,0,0.2); color: #E65100; }

.pronun-record-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.7rem 1.5rem;
  background: var(--pronun-color);
  color: white;
  border: none;
  border-radius: 25px;
  font-size: 0.9rem;
  font-family: 'Noto Sans JP', sans-serif;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.2s;
}
.pronun-record-btn:hover { background: #BF360C; transform: translateY(-1px); }
.pronun-record-btn.recording {
  background: #E53935;
  animation: pulse 1.5s infinite;
}
@keyframes pulse {
  0%, 100% { box-shadow: 0 0 0 0 rgba(229,57,53,0.4); }
  50% { box-shadow: 0 0 0 12px rgba(229,57,53,0); }
}

.pronun-result {
  margin-top: 1rem;
  padding: 0.8rem 1rem;
  border-radius: var(--radius-sm);
  display: none;
  font-size: 0.85rem;
}
.pronun-result.show { display: block; }
.pronun-result.good { background: var(--green-light); border: 1px solid #A5D6A7; }
.pronun-result.needs-work { background: #FFF3E0; border: 1px solid #FFB74D; }
.pronun-result.try-again { background: #FFEBEE; border: 1px solid #EF9A9A; }

.pronun-score {
  display: flex;
  align-items: center;
  gap: 0.8rem;
  margin-bottom: 0.5rem;
}
.pronun-score-circle {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'Quicksand', sans-serif;
  font-weight: 700;
  font-size: 1.1rem;
  color: white;
  flex-shrink: 0;
}
.pronun-score-circle.high { background: var(--green); }
.pronun-score-circle.mid { background: #FF9800; }
.pronun-score-circle.low { background: #E53935; }

.pronun-heard {
  margin-top: 0.5rem;
  padding: 0.5rem 0.8rem;
  background: rgba(0,0,0,0.03);
  border-radius: 8px;
  font-size: 0.8rem;
  color: var(--text-light);
}
.pronun-heard strong { color: var(--navy); }

.pronun-tips {
  margin-top: 0.6rem;
  font-size: 0.8rem;
  color: var(--text-light);
  padding-left: 0.5rem;
}
.pronun-tips li { margin-bottom: 0.3rem; }

.pronun-nav {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 0.8rem;
}
.pronun-nav-btn {
  padding: 0.4rem 1rem;
  border: 1px solid var(--border);
  border-radius: 20px;
  font-size: 0.8rem;
  background: white;
  cursor: pointer;
  transition: all 0.2s;
}
.pronun-nav-btn:hover { background: var(--pronun-light); border-color: #FFB74D; }
.pronun-nav-btn.disabled { opacity: 0.3; pointer-events: none; }
.pronun-counter {
  font-size: 0.75rem;
  color: var(--text-light);
  font-family: 'Quicksand', sans-serif;
  font-weight: 600;
}
.pronun-browser-note {
  font-size: 0.7rem;
  color: var(--text-light);
  margin-top: 0.5rem;
  padding: 0.4rem 0.6rem;
  background: rgba(0,0,0,0.03);
  border-radius: 6px;
}

.repeat-count { font-size: 0.75rem; color: var(--text-light); margin-left: 0.5rem; }

@media (max-width: 480px) {
  .header h1 { font-size: 1.6rem; }
  .main { padding: 0.8rem 0.6rem 4rem; }
  .section-body { padding: 0 0.8rem 1rem; }
}
</style>
</head>
<body>

<div class="header">
  <div class="header-badge">COOKING ENGLISH â€” CUSTOM EDITION</div>
  <h1>ğŸ¥­ Day 29: Mango Sorbet</h1>
  <p>30æ—¥é–“ã‚¯ãƒƒã‚­ãƒ³ã‚°è‹±èª â€” 29æ—¥ç›®</p>
</div>

<div class="progress-bar">
  <div class="progress-dots">
    <div class="progress-dot active" data-section="0"></div>
    <div class="progress-dot" data-section="1"></div>
    <div class="progress-dot" data-section="2"></div>
    <div class="progress-dot" data-section="3"></div>
    <div class="progress-dot" data-section="4"></div>
    <div class="progress-dot" data-section="5"></div>
    <div class="progress-dot" data-section="6"></div>
    <div class="progress-dot" data-section="7"></div>
    <div class="progress-dot" data-section="8"></div>
    <div class="progress-dot" data-section="9"></div>
    <div class="progress-dot" data-section="10"></div>
  </div>
  <div class="progress-label">1 / 11 ã‚»ã‚¯ã‚·ãƒ§ãƒ³</div>
</div>

<div class="main">

<div class="section-card sec-recipe open" data-index="0">
  <div class="section-header" onclick="toggleSection(this)">
    <div class="section-number">1</div>
    <div class="section-title"><div class="label">Recipe</div><div class="name">Mango Sorbetã®ãƒ¬ã‚·ãƒ”ã‚’èª­ã‚“ã§ã¿ã‚ˆã†</div></div>
    <div class="section-chevron">â–¾</div>
  </div>
  <div class="section-body">
    <div class="yamada-comment">
      <img src="assets/ryosuke.jpg" alt="Ryosuke" style="width:36px;height:36px;border-radius:50%;object-fit:cover;flex-shrink:0;box-shadow:0 2px 8px rgba(194,24,91,0.3);">
      <div class="yamada-text">
        <div class="yamada-name">Ryosuke</div>
        ãƒãƒ³ã‚´ãƒ¼ã‚½ãƒ«ãƒ™ã€ã‚±ã‚¢ãƒ³ã‚ºã®æš‘ã„æ—¥ã«ã´ã£ãŸã‚Šã ã­ï¼åœ°å…ƒã®ãƒãƒ³ã‚´ãƒ¼ã‚’ä½¿ã†ãªã‚“ã¦è´…æ²¢ã€‚é™¸ä¸Šã®ç·´ç¿’å¾Œã«é£Ÿã¹ãŸã‚‰æœ€é«˜ã ã‚ã†ãªãã€‚
      </div>
    </div>
    <div class="recipe-box">
      <h3>How to Make Mango Sorbet</h3>
      <p>Mango sorbet is a refreshing frozen dessert, perfect for the tropical heat in Cairns. It is dairy-free and very easy to make!</p>
      <div class="ingredients">
        <strong>Ingredients:</strong><br>
        ripe mangoes, sugar, water, lime juice, a pinch of salt
      </div>
      <ol class="recipe-steps">
        <li><strong>Peel</strong> the mangoes and <strong>cut</strong> the flesh into chunks.</li>
        <li><strong>Make</strong> a simple syrup by <strong>heating</strong> sugar and water in a pot until the sugar dissolves.</li>
        <li><strong>Blend</strong> the mango chunks, simple syrup, lime juice, and salt until very smooth.</li>
        <li><strong>Pour</strong> the mixture through a sieve to remove any lumps.</li>
        <li><strong>Transfer</strong> the mixture to a container and <strong>freeze</strong> for at least four hours.</li>
        <li><strong>Stir</strong> the sorbet with a fork every hour to keep it smooth. <strong>Serve</strong> in chilled bowls!</li>
      </ol>
    </div>
    <div class="action-row">
      <button class="action-btn" onclick="copyText('recipe-text')">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>
      <button class="action-btn tts-btn" onclick="speakText('recipe-tts', this)">ğŸ”Š èª­ã¿ä¸Šã’</button>
    </div>
    <div id="recipe-text" style="display:none">How to Make Mango Sorbet. Mango sorbet is a refreshing frozen dessert, perfect for the tropical heat in Cairns. It is dairy-free and very easy to make! Ingredients: ripe mangoes, sugar, water, lime juice, a pinch of salt. Steps: 1. **Peel** the mangoes and **cut** the flesh into chunks. 2. **Make** a simple syrup by **heating** sugar and water in a pot until the sugar dissolves. 3. **Blend** the mango chunks, simple syrup, lime juice, and salt until very smooth. 4. **Pour** the mixture through a sieve to remove any lumps. 5. **Transfer** the mixture to a container and **freeze** for at least four hours. 6. **Stir** the sorbet with a fork every hour to keep it smooth. **Serve** in chilled bowls!</div>
    <div id="recipe-tts" style="display:none">How to Make Mango Sorbet. Mango sorbet is a refreshing frozen dessert, perfect for the tropical heat in Cairns. It is dairy-free and very easy to make! Step 1. **Peel** the mangoes and **cut** the flesh into chunks. Step 2. **Make** a simple syrup by **heating** sugar and water in a pot until the sugar dissolves. Step 3. **Blend** the mango chunks, simple syrup, lime juice, and salt until very smooth. Step 4. **Pour** the mixture through a sieve to remove any lumps. Step 5. **Transfer** the mixture to a container and **freeze** for at least four hours. Step 6. **Stir** the sorbet with a fork every hour to keep it smooth. **Serve** in chilled bowls!</div>
    <button class="vocab-toggle" onclick="toggleVocab(this)">ğŸ“š å˜èªãƒªã‚¹ãƒˆã‚’è¦‹ã‚‹</button>
    <div class="vocab-list">
      <p style="font-size:0.75rem;color:var(--text-light);margin-bottom:0.5rem;">ğŸ’¡ ã‚ã‹ã‚‰ãªã‹ã£ãŸå˜èªã«ãƒã‚§ãƒƒã‚¯ âœ“</p>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">sorbet</span><span class="vocab-ja">ã‚½ãƒ«ãƒ™ï¼ˆã‚·ãƒ£ãƒ¼ãƒ™ãƒƒãƒˆï¼‰</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">refreshing</span><span class="vocab-ja">ã•ã‚ã‚„ã‹ãªãƒ»ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ã§ãã‚‹</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">ripe</span><span class="vocab-ja">ç†Ÿã—ãŸ</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">flesh</span><span class="vocab-ja">æœè‚‰</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">chunks</span><span class="vocab-ja">å¤§ãã‚ã®ã‹ãŸã¾ã‚Š</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">dissolves</span><span class="vocab-ja">æº¶ã‘ã‚‹</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">sieve</span><span class="vocab-ja">ã“ã—å™¨ãƒ»ã–ã‚‹</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">lumps</span><span class="vocab-ja">ã‹ãŸã¾ã‚Šãƒ»ãƒ€ãƒ</span></div>
    </div>
  </div>
</div>

<div class="section-card sec-quiz1" data-index="1">
  <div class="section-header" onclick="toggleSection(this)">
    <div class="section-number">2</div>
    <div class="section-title"><div class="label">Quiz 1</div><div class="name">ãƒ¬ã‚·ãƒ”ã®å†…å®¹ãƒã‚§ãƒƒã‚¯</div></div>
    <div class="section-chevron">â–¾</div>
  </div>
  <div class="section-body">
    <div class="quiz-question">Q: ãƒãƒ³ã‚´ãƒ¼ã‚½ãƒ«ãƒ™ã¯æœ€ä½ä½•æ™‚é–“å†·å‡ã—ã¾ã™ã‹ï¼Ÿ</div>
    <div class="quiz-options">
      <div class="quiz-option" onclick="checkQuiz(this, false)">2æ™‚é–“</div>
      <div class="quiz-option" onclick="checkQuiz(this, true)">4æ™‚é–“</div>
      <div class="quiz-option" onclick="checkQuiz(this, false)">6æ™‚é–“</div>
    </div>
    <div class="quiz-feedback correct">â­• æ­£è§£ï¼æ­£è§£ï¼&quot;Freeze for at least four hours.&quot;</div>
    <div class="quiz-feedback wrong">âŒ &quot;freeze&quot; ã®å¾Œã®æ™‚é–“ã‚’ã‚‚ã†ä¸€å›ç¢ºèªã—ã¦ã¿ã‚ˆã†ï¼</div>
  </div>
</div>

<div class="section-card sec-review" data-index="2">
  <div class="section-header" onclick="toggleSection(this)">
    <div class="section-number">3</div>
    <div class="section-title"><div class="label">Review</div><div class="name">ã‚«ãƒ•ã‚§ã®ãŠå®¢ã•ã‚“ãƒ¬ãƒ“ãƒ¥ãƒ¼</div></div>
    <div class="section-chevron">â–¾</div>
  </div>
  <div class="section-body">
    <div class="yamada-comment">
      <img src="assets/ryosuke.jpg" alt="Ryosuke" style="width:36px;height:36px;border-radius:50%;object-fit:cover;flex-shrink:0;box-shadow:0 2px 8px rgba(194,24,91,0.3);">
      <div class="yamada-text">
        <div class="yamada-name">Ryosuke</div>
        &quot;absolutely divine&quot; ã£ã¦è¡¨ç¾ã€è¦šãˆãŸã„ï¼ä½•ã‹ç¾å‘³ã—ã„ã‚‚ã®é£Ÿã¹ãŸã¨ãã«ä½¿ãˆã‚‹ã‚ˆã­ã€‚Snow Manã®æ‰“ã¡ä¸Šã’ã§ã‚‚ä½¿ãˆãã†ï¼ˆç¬‘ï¼‰ã€‚
      </div>
    </div>
    <div class="review-card">
      <div class="review-header"><span>â˜•</span><h4>Tropical Scoops â€” Port Douglas, Queensland, Australia</h4></div>
      <div class="review-stars">â­â­â­â­â­</div>
      <div class="review-text" style="margin-top:0.5rem;">
        On a hot day in Port Douglas, this is the place to go! I tried the mango sorbet and it was absolutely divine. The mango flavour was so fresh and natural. You can tell they use real local mangoes. It was smooth and light. Not too sweet at all. My partner had the passionfruit sorbet and she loved it too. They also have a mango and coconut option which I want to try next time. Sitting under the palm trees with a cold sorbet was the perfect afternoon!
      </div>
    </div>
    <div class="action-row">
      <button class="action-btn" onclick="copyText('review-text')">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>
      <button class="action-btn tts-btn" onclick="speakText('review-tts', this)">ğŸ”Š èª­ã¿ä¸Šã’</button>
    </div>
    <div id="review-text" style="display:none">On a hot day in Port Douglas, this is the place to go! I tried the mango sorbet and it was absolutely divine. The mango flavour was so fresh and natural. You can tell they use real local mangoes. It was smooth and light. Not too sweet at all. My partner had the passionfruit sorbet and she loved it too. They also have a mango and coconut option which I want to try next time. Sitting under the palm trees with a cold sorbet was the perfect afternoon!</div>
    <div id="review-tts" style="display:none">On a hot day in Port Douglas, this is the place to go! I tried the mango sorbet and it was absolutely divine. The mango flavour was so fresh and natural. You can tell they use real local mangoes. It was smooth and light. Not too sweet at all. My partner had the passionfruit sorbet and she loved it too. They also have a mango and coconut option which I want to try next time. Sitting under the palm trees with a cold sorbet was the perfect afternoon!</div>
    <button class="vocab-toggle" onclick="toggleVocab(this)">ğŸ“š å˜èªãƒªã‚¹ãƒˆã‚’è¦‹ã‚‹</button>
    <div class="vocab-list">
      <p style="font-size:0.75rem;color:var(--text-light);margin-bottom:0.5rem;">ğŸ’¡ ã‚ã‹ã‚‰ãªã‹ã£ãŸå˜èªã«ãƒã‚§ãƒƒã‚¯ âœ“</p>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">absolutely</span><span class="vocab-ja">æœ¬å½“ã«ãƒ»å®Œå…¨ã«</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">divine</span><span class="vocab-ja">æœ€é«˜ã«ç¾å‘³ã—ã„</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">natural</span><span class="vocab-ja">è‡ªç„¶ãª</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">local</span><span class="vocab-ja">åœ°å…ƒã®</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">partner</span><span class="vocab-ja">ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãƒ»æ‹äºº</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">palm trees</span><span class="vocab-ja">ãƒ¤ã‚·ã®æœ¨</span></div>
    </div>
  </div>
</div>

<div class="section-card sec-quiz2" data-index="3">
  <div class="section-header" onclick="toggleSection(this)">
    <div class="section-number">4</div>
    <div class="section-title"><div class="label">Quiz 2</div><div class="name">ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®å†…å®¹ãƒã‚§ãƒƒã‚¯</div></div>
    <div class="section-chevron">â–¾</div>
  </div>
  <div class="section-body">
    <div class="quiz-question">Q: ãƒ¬ãƒ“ãƒ¥ã‚¢ãƒ¼ã®ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã¯ä½•ã‚’é£Ÿã¹ã¾ã—ãŸã‹ï¼Ÿ</div>
    <div class="quiz-options">
      <div class="quiz-option" onclick="checkQuiz(this, false)">ãƒãƒ³ã‚´ãƒ¼ã‚½ãƒ«ãƒ™</div>
      <div class="quiz-option" onclick="checkQuiz(this, true)">ãƒ‘ãƒƒã‚·ãƒ§ãƒ³ãƒ•ãƒ«ãƒ¼ãƒ„ã‚½ãƒ«ãƒ™</div>
      <div class="quiz-option" onclick="checkQuiz(this, false)">ã‚³ã‚³ãƒŠãƒƒãƒ„ã‚½ãƒ«ãƒ™</div>
    </div>
    <div class="quiz-feedback correct">â­• æ­£è§£ï¼æ­£è§£ï¼&quot;My partner had the passionfruit sorbet.&quot;</div>
    <div class="quiz-feedback wrong">âŒ &quot;partner&quot; ã®å¾Œã‚’ã‚‚ã†ä¸€å›èª­ã‚“ã§ã¿ã‚ˆã†ï¼</div>
  </div>
</div>

<div class="section-card sec-tips" data-index="4">
  <div class="section-header" onclick="toggleSection(this)">
    <div class="section-number">5</div>
    <div class="section-title"><div class="label">ğŸ¦˜ Australia Tips</div><div class="name">ã‚ªãƒ¼ã‚¹ãƒˆãƒ©ãƒªã‚¢ã§Mango Sorbetã‚’æ¥½ã—ã‚€ãªã‚‰</div></div>
    <div class="section-chevron">â–¾</div>
  </div>
  <div class="section-body">
    <div class="tips-box">
      <p>ã‚±ã‚¢ãƒ³ã‚ºã‚„ãƒãƒ¼ãƒˆãƒ€ã‚°ãƒ©ã‚¹ã¯ã€Œ<strong>mango country</strong>ã€ã¨å‘¼ã°ã‚Œã‚‹ã»ã©ãƒãƒ³ã‚´ãƒ¼ã®ç”£åœ°ï¼11æœˆã€œ2æœˆãŒãƒãƒ³ã‚´ãƒ¼ã‚·ãƒ¼ã‚ºãƒ³ã§ã€ã€Œ<strong>Bowen mango</strong>ã€ã¯ç‰¹ã«æœ‰åã€‚ã€Œ<strong>Are these mangoes local?</strong>ã€ï¼ˆã“ã®ãƒãƒ³ã‚´ãƒ¼ã¯åœ°å…ƒç”£ï¼Ÿï¼‰ã¨èã„ã¦ã¿ã‚ˆã†ã€‚</p>
      <p>ã‚ªãƒ¼ã‚¹ãƒˆãƒ©ãƒªã‚¢ã§ã¯ã€Œ<strong>gelato</strong>ã€ï¼ˆã‚¸ã‚§ãƒ©ãƒ¼ãƒˆï¼‰ã‚„ã€Œ<strong>sorbet</strong>ã€ï¼ˆã‚½ãƒ«ãƒ™ï¼‰ã®ãŠåº—ãŒãŸãã•ã‚“ã‚ã‚Šã¾ã™ã€‚ã‚¢ã‚¤ã‚¹ã‚¯ãƒªãƒ¼ãƒ ã¨ã®é•ã„ã‚’èã‹ã‚ŒãŸã‚‰ã€Œ<strong>Sorbet is dairy-free. It is made with fruit and sugar.</strong>ã€ã¨èª¬æ˜ã§ãã‚‹ã¨GOODï¼</p>
      <p>æš‘ã„æ—¥ã«ã´ã£ãŸã‚Šã®è¡¨ç¾ï¼šã€Œ<strong>I could really go for a sorbet right now!</strong>ã€ï¼ˆä»Šã™ã”ãã‚½ãƒ«ãƒ™ãŒé£Ÿã¹ãŸã„ï¼ï¼‰ã€‚ã€Œ<strong>I could go for ~</strong>ã€ã¯ã€Œã€œãŒé£Ÿã¹ãŸã„ï¼é£²ã¿ãŸã„ã€ã¨ã„ã†ã‚«ã‚¸ãƒ¥ã‚¢ãƒ«ãªè¡¨ç¾ã§ã™ã€‚</p>
    </div>
  </div>
</div>

<div class="section-card sec-convo" data-index="5">
  <div class="section-header" onclick="toggleSection(this)">
    <div class="section-number">6</div>
    <div class="section-title"><div class="label">Conversation</div><div class="name">ã‚«ãƒ•ã‚§ã§ã®æ¥å®¢å ´é¢</div></div>
    <div class="section-chevron">â–¾</div>
  </div>
  <div class="section-body">
    <div class="yamada-comment">
      <img src="assets/ryosuke.jpg" alt="Ryosuke" style="width:36px;height:36px;border-radius:50%;object-fit:cover;flex-shrink:0;box-shadow:0 2px 8px rgba(194,24,91,0.3);">
      <div class="yamada-text">
        <div class="yamada-name">Ryosuke</div>
        ã€Œã‚«ãƒƒãƒ—ã‹ã‚³ãƒ¼ãƒ³ã‹ã€ã£ã¦èã‘ã‚‹ã‚ˆã†ã«ãªã‚‹ã¨æ¥å®¢ã®å¹…ãŒåºƒãŒã‚‹ã‚ˆã­ã€‚ãƒ•ã‚£ã‚®ãƒ¥ã‚¢ã‚¹ã‚±ãƒ¼ãƒˆã‚‚ã‚·ãƒ§ãƒ¼ãƒˆã¨ãƒ•ãƒªãƒ¼ã§æ§‹æˆãŒé•ã†ã‚ˆã†ã«ã€è³ªå•ã®ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å¢—ã‚„ãã†ï¼
      </div>
    </div>
    <div class="conversation-scene">â˜• ã‚«ãƒ•ã‚§ã§ã€ãŠå®¢ã•ã‚“ï¼ˆGraceï¼‰ãŒæš‘ã„æ—¥ã«ã•ã£ã±ã‚Šã—ãŸãƒ‡ã‚¶ãƒ¼ãƒˆã‚’æ³¨æ–‡ã™ã‚‹å ´é¢</div>
    <div class="convo-line"><span class="convo-speaker you">You:</span><span class="convo-text">Hi! It is such a hot day today, isn&#x27;t it?</span></div>
    <div class="convo-line"><span class="convo-speaker emma">Grace:</span><span class="convo-text">Yes, it is! Do you have anything cold and refreshing?</span></div>
    <div class="convo-line"><span class="convo-speaker you">You:</span><span class="convo-text">We have homemade mango sorbet. It is perfect for a day like this.</span></div>
    <div class="convo-line"><span class="convo-speaker emma">Grace:</span><span class="convo-text">Is it made with real mangoes?</span></div>
    <div class="convo-line"><span class="convo-speaker you">You:</span><span class="convo-text">Yes! We use fresh local mangoes from Bowen.</span></div>
    <div class="convo-line"><span class="convo-speaker emma">Grace:</span><span class="convo-text">That sounds amazing. Is it dairy-free?</span></div>
    <div class="convo-line"><span class="convo-speaker you">You:</span><span class="convo-text">Yes, it is completely dairy-free. Just mango, sugar, and lime.</span></div>
    <div class="convo-line"><span class="convo-speaker emma">Grace:</span><span class="convo-text">Lovely! Can I have a double scoop, please?</span></div>
    <div class="convo-line"><span class="convo-speaker you">You:</span><span class="convo-text">Of course! In a cup or a cone?</span></div>
    <div class="convo-line"><span class="convo-speaker emma">Grace:</span><span class="convo-text">A cup, please. Thank you!</span></div>
    <div class="convo-line"><span class="convo-speaker you">You:</span><span class="convo-text">Here you go! That is seven dollars. Enjoy!</span></div>
    <div class="action-row">
      <button class="action-btn" onclick="copyText('convo-text')">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>
      <button class="action-btn tts-btn" onclick="speakText('convo-tts', this)">ğŸ”Š èª­ã¿ä¸Šã’</button>
    </div>
    <div id="convo-text" style="display:none">You: Hi! It is such a hot day today, isn&#x27;t it? Grace: Yes, it is! Do you have anything cold and refreshing? You: We have homemade mango sorbet. It is perfect for a day like this. Grace: Is it made with real mangoes? You: Yes! We use fresh local mangoes from Bowen. Grace: That sounds amazing. Is it dairy-free? You: Yes, it is completely dairy-free. Just mango, sugar, and lime. Grace: Lovely! Can I have a double scoop, please? You: Of course! In a cup or a cone? Grace: A cup, please. Thank you! You: Here you go! That is seven dollars. Enjoy!</div>
    <div id="convo-tts" style="display:none">Hi! It is such a hot day today, isn&#x27;t it? ... Yes, it is! Do you have anything cold and refreshing? ... We have homemade mango sorbet. It is perfect for a day like this. ... Is it made with real mangoes? ... Yes! We use fresh local mangoes from Bowen. ... That sounds amazing. Is it dairy-free? ... Yes, it is completely dairy-free. Just mango, sugar, and lime. ... Lovely! Can I have a double scoop, please? ... Of course! In a cup or a cone? ... A cup, please. Thank you! ... Here you go! That is seven dollars. Enjoy!</div>
    <button class="vocab-toggle" onclick="toggleVocab(this)">ğŸ“š å˜èªãƒªã‚¹ãƒˆã‚’è¦‹ã‚‹</button>
    <div class="vocab-list">
      <p style="font-size:0.75rem;color:var(--text-light);margin-bottom:0.5rem;">ğŸ’¡ ã‚ã‹ã‚‰ãªã‹ã£ãŸå˜èªã«ãƒã‚§ãƒƒã‚¯ âœ“</p>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">refreshing</span><span class="vocab-ja">ã•ã‚ã‚„ã‹ãªãƒ»ã•ã£ã±ã‚Šã—ãŸ</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">local</span><span class="vocab-ja">åœ°å…ƒã®</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">completely</span><span class="vocab-ja">å®Œå…¨ã«</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">scoop</span><span class="vocab-ja">ã‚¹ã‚¯ãƒ¼ãƒ—ï¼ˆã‚¢ã‚¤ã‚¹ã®1ã™ãã„ï¼‰</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">double scoop</span><span class="vocab-ja">ãƒ€ãƒ–ãƒ«ï¼ˆ2ã™ãã„ï¼‰</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">cone</span><span class="vocab-ja">ã‚³ãƒ¼ãƒ³ï¼ˆãƒ¯ãƒƒãƒ•ãƒ«ã‚³ãƒ¼ãƒ³ï¼‰</span></div>
      <div class="vocab-item" onclick="this.classList.toggle('checked')"><div class="vocab-check">âœ“</div><span class="vocab-en">here you go</span><span class="vocab-ja">ã¯ã„ã€ã©ã†ã</span></div>
    </div>
  </div>
</div>

<div class="section-card sec-quiz3" data-index="6">
  <div class="section-header" onclick="toggleSection(this)">
    <div class="section-number">7</div>
    <div class="section-title"><div class="label">Quiz 3</div><div class="name">ä¼šè©±ã®å†…å®¹ãƒã‚§ãƒƒã‚¯</div></div>
    <div class="section-chevron">â–¾</div>
  </div>
  <div class="section-body">
    <div class="quiz-question">Q: Graceã¯ã‚½ãƒ«ãƒ™ã‚’ã©ã†ã‚„ã£ã¦é£Ÿã¹ã¾ã™ã‹ï¼Ÿ</div>
    <div class="quiz-options">
      <div class="quiz-option" onclick="checkQuiz(this, false)">ã‚³ãƒ¼ãƒ³ã§</div>
      <div class="quiz-option" onclick="checkQuiz(this, true)">ã‚«ãƒƒãƒ—ã§</div>
      <div class="quiz-option" onclick="checkQuiz(this, false)">æŒã¡å¸°ã‚Šã§</div>
    </div>
    <div class="quiz-feedback correct">â­• æ­£è§£ï¼æ­£è§£ï¼&quot;A cup, please.&quot;</div>
    <div class="quiz-feedback wrong">âŒ &quot;cup or cone&quot; ã®è³ªå•ã«å¯¾ã™ã‚‹Graceã®ç­”ãˆã‚’æ¢ã—ã¦ã¿ã‚ˆã†ï¼</div>
  </div>
</div>

<div class="section-card sec-listening" data-index="7">
  <div class="section-header" onclick="toggleSection(this)">
    <div class="section-number">8</div>
    <div class="section-title"><div class="label">ğŸ§ Listening Challenge</div><div class="name">ãƒªã‚¹ãƒ‹ãƒ³ã‚°ã«æŒ‘æˆ¦ã—ã‚ˆã†</div></div>
    <div class="section-chevron">â–¾</div>
  </div>
  <div class="section-body">
    <div class="yamada-comment">
      <img src="assets/ryosuke.jpg" alt="Ryosuke" style="width:36px;height:36px;border-radius:50%;object-fit:cover;flex-shrink:0;box-shadow:0 2px 8px rgba(194,24,91,0.3);">
      <div class="yamada-text">
        <div class="yamada-name">Ryosuke</div>
        ãƒãƒ¼ã‚±ãƒƒãƒˆã§ã®ä¼šè©±ã€å®Ÿè·µçš„ã ã­ï¼ã‚±ã‚¢ãƒ³ã‚ºã®ãƒãƒ¼ã‚±ãƒƒãƒˆã§ãƒãƒ³ã‚´ãƒ¼è²·ã†ã¨ãä½¿ãˆã‚‹ã‚ˆã€‚29æ—¥ç›®ã€ã‚‚ã†ã™ãã‚´ãƒ¼ãƒ«ã ï¼
      </div>
    </div>

    <!-- Part A -->
    <div class="listening-box">
      <h4>ğŸ”Š Part A: ãƒãƒ¼ã‚±ãƒƒãƒˆã§ãƒãƒ³ã‚´ãƒ¼ã‚’è²·ã†ï¼ˆç©´åŸ‹ã‚ï¼‰</h4>
      <p class="listening-instruction">éŸ³å£°ã‚’è´ã„ã¦ã€ç©ºæ¬„ã«å…¥ã‚‹å˜èªã‚’æ›¸ã„ã¦ã¿ã‚ˆã†ã€‚æœ€åˆã¯ã‚ã‹ã‚‰ãªãã¦å½“ç„¶ï¼ä½•å›ã§ã‚‚è´ã„ã¦OKã€‚</p>
      <div style="display:flex;align-items:center;gap:0.5rem;flex-wrap:wrap;margin-bottom:0.8rem;">
        <button class="tts-btn" onclick="speakText('listening-a-tts', this)">ğŸ”Š å†ç”Ÿ</button>
        <span class="tts-speed">é€Ÿåº¦: <select id="speed-a" onchange="currentSpeed=parseFloat(this.value)">
          <option value="0.7">ğŸ¢ ã‚†ã£ãã‚Š</option>
          <option value="0.85" selected>æ™®é€š</option>
          <option value="1">é€Ÿã„</option>
        </select></span>
        <span class="repeat-count" id="repeat-a">å†ç”Ÿå›æ•°: 0</span>
      </div>
      <div id="listening-a-tts" style="display:none">Excuse me, how much are the mangoes? They are three dollars a kilo. Are they from Bowen? Yes, they are Bowen mangoes. They are very sweet. Can I try one? Of course, here you go. Oh, this is delicious! I will take two kilos, please. No worries. Would you like a bag? Yes, please. Thank you!</div>
      <div class="gap-fill">1. How much are the <input type="text" data-answer="mangoes" placeholder="____"> ?</div>
      <div class="gap-fill">2. They are three dollars a <input type="text" data-answer="kilo" placeholder="____"> .</div>
      <div class="gap-fill">3. They are very <input type="text" data-answer="sweet" placeholder="____"> .</div>
      <div class="gap-fill">4. I will take two <input type="text" data-answer="kilos" placeholder="____"> , please.</div>
      <div class="gap-fill">5. Would you like a <input type="text" data-answer="bag" placeholder="____"> ?</div>
      <button class="listening-check-btn" onclick="checkAllGaps(this)">âœ… ç­”ãˆã‚’ç¢ºèª</button>
      <div class="listening-answer" id="gap-answer-a">
        <strong>ç­”ãˆ:</strong> 1. <strong>mangoes</strong> 2. <strong>kilo</strong> 3. <strong>sweet</strong> 4. <strong>kilos</strong> 5. <strong>bag</strong>
      </div>
      <button class="listening-script-toggle" onclick="toggleScript(this)">ğŸ“ ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’è¦‹ã‚‹</button>
      <div class="listening-script">
        Excuse me, how much are the mangoes? They are three dollars a kilo.<br>
        Are they from Bowen? Yes, they are Bowen mangoes.<br>
        They are very sweet.<br>
        Can I try one? Of course, here you go.<br>
        Oh, this is delicious! I will take two kilos, please.<br>
        No worries.<br>
        Would you like a bag? Yes, please.<br>
        Thank you!
      </div>
    </div>

    <!-- Part B -->
    <div class="listening-box">
      <h4>ğŸ”Š Part B: å¤ã®ã‚¹ãƒšã‚·ãƒ£ãƒ«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆå†…å®¹ç†è§£ï¼‰</h4>
      <p class="listening-instruction">éŸ³å£°ã‚’è´ã„ã¦ã‹ã‚‰ã€è³ªå•ã«ç­”ãˆã¦ã¿ã‚ˆã†ã€‚å…ˆã«è³ªå•ã‚’èª­ã‚“ã§ã‹ã‚‰è´ãã®ã‚‚OKï¼</p>
      <div style="display:flex;align-items:center;gap:0.5rem;flex-wrap:wrap;margin-bottom:0.8rem;">
        <button class="tts-btn" onclick="speakText('listening-b-tts', this)">ğŸ”Š å†ç”Ÿ</button>
        <span class="tts-speed">é€Ÿåº¦: <select id="speed-b" onchange="currentSpeed=parseFloat(this.value)">
          <option value="0.7">ğŸ¢ ã‚†ã£ãã‚Š</option>
          <option value="0.85" selected>æ™®é€š</option>
          <option value="1">é€Ÿã„</option>
        </select></span>
        <span class="repeat-count" id="repeat-b">å†ç”Ÿå›æ•°: 0</span>
      </div>
      <div id="listening-b-tts" style="display:none">Hello and welcome to Lagoon CafÃ©! We are excited to share our new summer menu. This month, we have four special frozen desserts. First, our famous mango sorbet made with Bowen mangoes. Second, a tropical coconut ice cream. Third, a passionfruit and lime frozen yoghurt. And fourth, a watermelon granita. All frozen desserts are six dollars for a single scoop and nine dollars for a double. We are open every day from eight in the morning until nine at night. Come and cool down with us!</div>

      <div class="quiz-question" style="margin-top:0.5rem;">Q1: ã‚¹ãƒšã‚·ãƒ£ãƒ«ãƒ•ãƒ­ãƒ¼ã‚ºãƒ³ãƒ‡ã‚¶ãƒ¼ãƒˆã¯ä½•ç¨®é¡ã‚ã‚Šã¾ã™ã‹ï¼Ÿ</div>
      <div class="quiz-options">
        <div class="quiz-option" onclick="checkQuiz(this, false)">3ç¨®é¡</div>
        <div class="quiz-option" onclick="checkQuiz(this, true)">4ç¨®é¡</div>
        <div class="quiz-option" onclick="checkQuiz(this, false)">5ç¨®é¡</div>
      </div>
      <div class="quiz-feedback correct">â­• æ­£è§£ï¼æ­£è§£ï¼&quot;four special frozen desserts&quot;</div>
      <div class="quiz-feedback wrong">âŒ &quot;special&quot; ã®å‰ã®æ•°å­—ã‚’ã‚‚ã†ä¸€å›è´ã„ã¦ã¿ã‚ˆã†ï¼</div>

      <div class="quiz-question" style="margin-top:1.2rem;">Q2: ã‚·ãƒ³ã‚°ãƒ«ã‚¹ã‚¯ãƒ¼ãƒ—ã¯ã„ãã‚‰ã§ã™ã‹ï¼Ÿ</div>
      <div class="quiz-options">
        <div class="quiz-option" onclick="checkQuiz(this, false)">5ãƒ‰ãƒ«</div>
        <div class="quiz-option" onclick="checkQuiz(this, true)">6ãƒ‰ãƒ«</div>
        <div class="quiz-option" onclick="checkQuiz(this, false)">7ãƒ‰ãƒ«</div>
      </div>
      <div class="quiz-feedback correct">â­• æ­£è§£ï¼æ­£è§£ï¼&quot;six dollars for a single scoop&quot;</div>
      <div class="quiz-feedback wrong">âŒ &quot;single scoop&quot; ã®å‰ã®å€¤æ®µã‚’ã‚‚ã†ä¸€å›è´ã„ã¦ã¿ã‚ˆã†ï¼</div>

      <div class="quiz-question" style="margin-top:1.2rem;">Q3: ã‚«ãƒ•ã‚§ã®å–¶æ¥­æ™‚é–“ã¯ï¼Ÿ</div>
      <div class="quiz-options">
        <div class="quiz-option" onclick="checkQuiz(this, false)">æœ7æ™‚ã€œå¤œ8æ™‚</div>
        <div class="quiz-option" onclick="checkQuiz(this, true)">æœ8æ™‚ã€œå¤œ9æ™‚</div>
        <div class="quiz-option" onclick="checkQuiz(this, false)">æœ9æ™‚ã€œå¤œ10æ™‚</div>
      </div>
      <div class="quiz-feedback correct">â­• æ­£è§£ï¼æ­£è§£ï¼&quot;from eight in the morning until nine at night&quot;</div>
      <div class="quiz-feedback wrong">âŒ å–¶æ¥­æ™‚é–“ã‚’è¨€ã£ã¦ã„ã‚‹éƒ¨åˆ†ã‚’ã‚‚ã†ä¸€å›è´ã„ã¦ã¿ã‚ˆã†ï¼</div>

      <button class="listening-script-toggle" onclick="toggleScript(this)" style="margin-top:0.8rem;">ğŸ“ ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’è¦‹ã‚‹</button>
      <div class="listening-script">
        Hello and welcome to Lagoon CafÃ©! We are excited to share our new summer menu.<br>
        This month, we have four special frozen desserts.<br>
        First, our famous mango sorbet made with Bowen mangoes.<br>
        Second, a tropical coconut ice cream.<br>
        Third, a passionfruit and lime frozen yoghurt.<br>
        And fourth, a watermelon granita.<br>
        All frozen desserts are six dollars for a single scoop and nine dollars for a double.<br>
        We are open every day from eight in the morning until nine at night.<br>
        Come and cool down with us!
      </div>
    </div>
  </div>
</div>

<div class="section-card sec-pronun" data-index="8">
  <div class="section-header" onclick="toggleSection(this)">
    <div class="section-number">9</div>
    <div class="section-title"><div class="label">ğŸ¤ Pronunciation Check</div><div class="name">ç™ºéŸ³ãƒã‚§ãƒƒã‚¯ã«æŒ‘æˆ¦ã—ã‚ˆã†</div></div>
    <div class="section-chevron">â–¾</div>
  </div>
  <div class="section-body">
    <div class="yamada-comment">
      <img src="assets/ryosuke.jpg" alt="Ryosuke" style="width:36px;height:36px;border-radius:50%;object-fit:cover;flex-shrink:0;box-shadow:0 2px 8px rgba(194,24,91,0.3);">
      <div class="yamada-text">
        <div class="yamada-name">Ryosuke</div>
        ä»˜åŠ ç–‘å•æ–‡ã€Œisn&#x27;t it?ã€ã¯ä¼šè©±ã§ã‚ˆãå‡ºã¦ãã‚‹ã‚ˆã€‚è‡ªç„¶ã«è¨€ãˆã‚‹ã‚ˆã†ã«ãªã‚‹ã¨è‹±èªã£ã½ãèã“ãˆã‚‹ï¼
      </div>
    </div>

    <div class="pronun-box">
      <h4>ğŸ¤ æ–‡ã‚’å£°ã«å‡ºã—ã¦èª­ã‚“ã§ã¿ã‚ˆã†</h4>
      <p style="font-size:0.85rem;color:var(--text-light);margin-bottom:0.5rem;">ãƒã‚¤ã‚¯ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ã€è¡¨ç¤ºã•ã‚ŒãŸæ–‡ã‚’èª­ã¿ä¸Šã’ã¦ãã ã•ã„ã€‚éŸ³å£°èªè­˜ã§ã‚ãªãŸã®ç™ºéŸ³ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚</p>

      <div class="pronun-sentence" id="pronun-target"></div>

      <div style="display:flex;align-items:center;gap:0.8rem;flex-wrap:wrap;">
        <button class="pronun-record-btn" id="pronun-btn" onclick="togglePronunRecording()">
          ğŸ¤ éŒ²éŸ³ã‚¹ã‚¿ãƒ¼ãƒˆ
        </button>
        <button class="tts-btn" onclick="speakPronunSentence()" style="background:var(--navy);">ğŸ”Š ãŠæ‰‹æœ¬ã‚’è´ã</button>
      </div>

      <div class="pronun-result" id="pronun-result">
        <div class="pronun-score">
          <div class="pronun-score-circle" id="pronun-score-circle">-</div>
          <div>
            <div style="font-weight:700;color:var(--navy);" id="pronun-score-label">åˆ¤å®šä¸­...</div>
            <div style="font-size:0.75rem;color:var(--text-light);" id="pronun-score-detail"></div>
          </div>
        </div>
        <div class="pronun-heard" id="pronun-heard"></div>
        <ul class="pronun-tips" id="pronun-tips"></ul>
      </div>

      <div class="pronun-nav">
        <button class="pronun-nav-btn" id="pronun-prev" onclick="changePronunSentence(-1)">â† å‰ã®æ–‡</button>
        <span class="pronun-counter" id="pronun-counter">1 / 5</span>
        <button class="pronun-nav-btn" id="pronun-next" onclick="changePronunSentence(1)">æ¬¡ã®æ–‡ â†’</button>
      </div>

      <div class="pronun-browser-note">
        ğŸ’¡ Chromeæ¨å¥¨ã€‚ãƒã‚¤ã‚¯ã®è¨±å¯ãŒå¿…è¦ã§ã™ã€‚é™ã‹ãªå ´æ‰€ã§ã€ã¯ã£ãã‚Šå£°ã«å‡ºã—ã¦èª­ã‚“ã§ãã ã•ã„ã€‚
      </div>
    </div>
  </div>
</div>
<script>
const pronunSentences = [{"text": "It is such a hot day today, isn't it?", "tip": "such a ãŒã€Œã‚µãƒƒãƒãƒ£ã€ã€‚isn't it ã¯ã€Œã‚¤ã‚ºãƒ³ãƒ†ã‚£ãƒƒã€ã¨è»½ãã€‚ä»˜åŠ ç–‘å•æ–‡ã¯ä¸‹ãŒã‚Šèª¿å­ã§ã€‚"}, {"text": "We use fresh local mangoes from Bowen.", "tip": "fresh local ãŒã€Œãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒ­ãƒ¼ã‚«ãƒ«ã€ã€‚mangoes ã¯ã€Œãƒãƒ³ã‚´ãƒ¼ã‚ºã€ã§ z ã®éŸ³ã€‚Bowen ã¯ã€Œãƒœã‚¦ã‚¨ãƒ³ã€ã€‚"}, {"text": "Can I have a double scoop, please?", "tip": "Can I ãŒã€Œã‚­ãƒ£ãƒŠã‚¤ã€ã€‚double ã¯ã€Œãƒ€ãƒ–ãƒ«ã€ã€‚scoop ã¯ã€Œã‚¹ã‚¯ãƒ¼ãƒ—ã€ã§oo ã‚’é•·ã‚ã«ã€‚"}, {"text": "In a cup or a cone?", "tip": "cup or a ãŒã€Œã‚«ãƒƒãƒãƒ¼ãƒ©ã€ã¨ãƒªãƒ³ã‚­ãƒ³ã‚°ã€‚cone ã¯ã€Œã‚³ãƒ¼ãƒ³ã€ã§æœ€å¾Œã® n ã‚’ã—ã£ã‹ã‚Šã€‚"}, {"text": "Here you go! Enjoy!", "tip": "Here you ã¯ã€Œãƒ’ã‚¢ãƒ¦ãƒ¼ã€ã€‚Enjoy ã® oy ã¯ã€Œã‚ªã‚¤ã€ã€‚ãŠå®¢ã•ã‚“ã«æ¸¡ã™ã¨ãã®å®šç•ªãƒ•ãƒ¬ãƒ¼ã‚ºï¼"}];
</script>

<div class="section-card sec-tryit" data-index="9">
  <div class="section-header" onclick="toggleSection(this)">
    <div class="section-number">10</div>
    <div class="section-title"><div class="label">âœï¸ Try It!</div><div class="name">ä»Šæ—¥ã®ã“ã¨ã‚’3è¡Œã§æ›¸ã„ã¦ã¿ã‚ˆã†</div></div>
    <div class="section-chevron">â–¾</div>
  </div>
  <div class="section-body">
    <div class="yamada-comment">
      <img src="assets/ryosuke.jpg" alt="Ryosuke" style="width:36px;height:36px;border-radius:50%;object-fit:cover;flex-shrink:0;box-shadow:0 2px 8px rgba(194,24,91,0.3);">
      <div class="yamada-text">
        <div class="yamada-name">Ryosuke</div>
        ã‚±ã‚¢ãƒ³ã‚ºã®æš‘ã•ã€æ—¥æœ¬ã¨ã¯é•ã†ã§ã—ã‚‡ï¼Ÿå†·ãŸã„ãƒ‡ã‚¶ãƒ¼ãƒˆã®è©±ã€è‹±èªã§æ›¸ã„ã¦ã¿ã¦ï¼æ˜æ—¥ã¯ã„ã‚ˆã„ã‚ˆæœ€çµ‚æ—¥ã ã‚ˆï¼
      </div>
    </div>
    <div class="try-it-box">
      <h4>âœï¸ ã‚±ã‚¢ãƒ³ã‚ºã®æš‘ã„æ—¥ã«ã´ã£ãŸã‚Šãªå†·ãŸã„ãƒ‡ã‚¶ãƒ¼ãƒˆã«ã¤ã„ã¦è‹±èªã§3è¡Œæ›¸ã„ã¦ã¿ã‚ˆã†</h4>
      <p>ğŸ’¡ ä»Šæ—¥ã®ä¼šè©±ã‚„æ–‡ã‚’ãƒãƒã—ã¦OKï¼ã‚ã‹ã‚‰ãªã„è‹±èªã¯æ—¥æœ¬èªã®ã¾ã¾ã§å¤§ä¸ˆå¤«ã€‚</p>
      <p><strong>ä¾‹:</strong> Today was very hot in Cairns. A customer asked for something cold and refreshing. I recommended our mango sorbet and she loved it!</p>
      <textarea class="try-it-textarea" id="tryit-text" placeholder="ã“ã“ã«è‹±èªã§æ›¸ã„ã¦ã¿ã‚ˆã†..."></textarea>
    </div>
  </div>
</div>

<div class="section-card sec-summary" data-index="10">
  <div class="section-header" onclick="toggleSection(this)">
    <div class="section-number">11</div>
    <div class="section-title"><div class="label">ğŸ“Š Summary</div><div class="name">å­¦ç¿’ã‚µãƒãƒªãƒ¼</div></div>
    <div class="section-chevron">â–¾</div>
  </div>
  <div class="section-body">
    <div class="summary-box">
      <p style="font-size:0.85rem;color:var(--text-light);margin-bottom:0.8rem;">ChatGPTã‚„Claudeã«ã‚³ãƒ”ãƒšã—ã¦è§£èª¬ã‚’ã‚‚ã‚‰ãŠã†</p>
      <button class="summary-btn" onclick="generateSummary()">ğŸ“‹ ã‚µãƒãƒªãƒ¼ã‚’ç”Ÿæˆã™ã‚‹</button>
      <div class="summary-output" id="summary-output"></div>
      <div class="action-row" style="justify-content:center;margin-top:0.5rem;">
        <button class="action-btn" onclick="copySummary()">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button>
        <a class="action-btn" href="https://chat.openai.com" target="_blank">ğŸ¤– ChatGPT</a>
        <a class="action-btn" href="https://claude.ai" target="_blank">ğŸ¤– Claude</a>
      </div>
    </div>
  </div>
</div>

<div class="day-nav">
  <a class="nav-btn" href="day28.html">â† Day 28</a>
  <a class="home-btn" href="index.html">ğŸ  ãƒ›ãƒ¼ãƒ </a>
  <a class="nav-btn" href="day30.html">Day 30 â†’</a>
</div>

</div>

<script>
let currentSpeed = 0.85;
let repeatCounts = {};

function toggleSection(header) {
  const card = header.parentElement;
  card.classList.toggle('open');
  const index = parseInt(card.dataset.index);
  const dots = document.querySelectorAll('.progress-dot');
  if (card.classList.contains('open')) {
    dots[index].classList.add('active');
    for (let i = 0; i < index; i++) { dots[i].classList.add('complete'); dots[i].classList.remove('active'); }
  }
  const openCards = document.querySelectorAll('.section-card.open');
  document.querySelector('.progress-label').textContent = openCards.length + ' / 11 ã‚»ã‚¯ã‚·ãƒ§ãƒ³';
}

function toggleVocab(btn) {
  const list = btn.nextElementSibling;
  list.classList.toggle('show');
  btn.textContent = list.classList.contains('show') ? 'ğŸ“š å˜èªãƒªã‚¹ãƒˆã‚’éš ã™' : 'ğŸ“š å˜èªãƒªã‚¹ãƒˆã‚’è¦‹ã‚‹';
}

function checkQuiz(option, isCorrect) {
  const parent = option.parentElement;
  if (parent.dataset.answered) return;
  parent.dataset.answered = 'true';
  const allOptions = parent.querySelectorAll('.quiz-option');
  allOptions.forEach(opt => opt.style.pointerEvents = 'none');
  if (isCorrect) {
    option.classList.add('correct');
    parent.nextElementSibling.classList.add('show');
  } else {
    option.classList.add('wrong');
    parent.nextElementSibling.nextElementSibling.classList.add('show');
  }
}

// Web Speech API TTS
function speakText(elementId, btn) {
  if (window.speechSynthesis.speaking) {
    window.speechSynthesis.cancel();
    btn.textContent = 'ğŸ”Š å†ç”Ÿ';
    btn.classList.remove('playing');
    return;
  }
  const text = document.getElementById(elementId).textContent;
  const utterance = new SpeechSynthesisUtterance(text);
  utterance.lang = 'en-AU';
  utterance.rate = currentSpeed;
  utterance.pitch = 1;

  const voices = window.speechSynthesis.getVoices();
  const enVoice = voices.find(v => v.lang.startsWith('en-AU')) ||
                  voices.find(v => v.lang.startsWith('en-GB')) ||
                  voices.find(v => v.lang.startsWith('en'));
  if (enVoice) utterance.voice = enVoice;

  btn.textContent = 'â¹ åœæ­¢';
  btn.classList.add('playing');

  if (!repeatCounts[elementId]) repeatCounts[elementId] = 0;
  repeatCounts[elementId]++;
  const repeatEl = btn.parentElement.querySelector('.repeat-count');
  if (repeatEl) repeatEl.textContent = 'å†ç”Ÿå›æ•°: ' + repeatCounts[elementId];

  utterance.onend = () => { btn.textContent = 'ğŸ”Š å†ç”Ÿ'; btn.classList.remove('playing'); };
  utterance.onerror = () => { btn.textContent = 'ğŸ”Š å†ç”Ÿ'; btn.classList.remove('playing'); };
  window.speechSynthesis.speak(utterance);
}

window.speechSynthesis.onvoiceschanged = () => window.speechSynthesis.getVoices();

function checkAllGaps(btn) {
  const box = btn.closest('.listening-box');
  const inputs = box.querySelectorAll('input[data-answer]');
  inputs.forEach(input => {
    const correct = input.dataset.answer.toLowerCase();
    const val = input.value.trim().toLowerCase();
    input.classList.remove('correct-input', 'wrong-input');
    if (val === correct) { input.classList.add('correct-input'); }
    else { input.classList.add('wrong-input'); }
  });
  const answer = box.querySelector('.listening-answer');
  if (answer) answer.classList.add('show');
}

function toggleScript(btn) {
  const script = btn.nextElementSibling;
  script.classList.toggle('show');
  btn.textContent = script.classList.contains('show') ? 'ğŸ“ ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’éš ã™' : 'ğŸ“ ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’è¦‹ã‚‹';
}

function copyText(id) {
  const text = document.getElementById(id).textContent;
  navigator.clipboard.writeText(text).then(() => alert('ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼'));
}

function generateSummary() {
  const checked = document.querySelectorAll('.vocab-item.checked');
  const vocabList = Array.from(checked).map(i => i.querySelector('.vocab-en').textContent);
  const tryIt = document.getElementById('tryit-text').value;
  const listeningPlays = Object.entries(repeatCounts).map(([k,v]) => k + ': ' + v + 'å›').join(', ');

  let s = `ã€Day 29: Mango Sorbet å­¦ç¿’ã‚µãƒãƒªãƒ¼ã€‘\n\n`;
  s += `â–  ãƒã‚§ãƒƒã‚¯ã—ãŸå˜èª (${vocabList.length}å€‹):\n${vocabList.length > 0 ? vocabList.join(', ') : 'ãªã—'}\n\n`;
  s += `â–  ãƒªã‚¹ãƒ‹ãƒ³ã‚°å†ç”Ÿå›æ•°:\n${listeningPlays || 'æœªå†ç”Ÿ'}\n\n`;

  const pronunSummary = pronunResults.filter(r => r).map((r, i) =>
    `  ${i+1}. "${r.target}" â†’ ${r.score}% (èªè­˜: "${r.heard}")`
  ).join('\n');
  s += `â–  ç™ºéŸ³ãƒã‚§ãƒƒã‚¯çµæœ:\n${pronunSummary || '(æœªå®Ÿæ–½)'}\n\n`;

  s += `â–  Today's Writing:\n${tryIt || '(æœªè¨˜å…¥)'}\n\n`;
  s += `---\nä¸Šã®å†…å®¹ã‚’ã‚‚ã¨ã«ã€ä»¥ä¸‹ã‚’æ•™ãˆã¦ãã ã•ã„ï¼š\n1. ãƒã‚§ãƒƒã‚¯ã—ãŸå˜èªã®ä½¿ã„æ–¹ï¼ˆä¾‹æ–‡ä»˜ãï¼‰\n2. ç™ºéŸ³ãƒã‚§ãƒƒã‚¯ã§é–“é•ãˆãŸéƒ¨åˆ†ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹\n3. Today's Writingã®æ·»å‰Š\n4. ä»Šæ—¥å­¦ã‚“ã ãƒ•ãƒ¬ãƒ¼ã‚ºã®ç™ºå±•è¡¨ç¾`;

  const output = document.getElementById('summary-output');
  output.textContent = s;
  output.classList.add('show');
}

function copySummary() {
  const text = document.getElementById('summary-output').textContent;
  navigator.clipboard.writeText(text).then(() => alert('ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼'));
}

document.querySelectorAll('.progress-dot').forEach(dot => {
  dot.addEventListener('click', () => {
    const index = parseInt(dot.dataset.section);
    const cards = document.querySelectorAll('.section-card');
    if (cards[index]) {
      cards[index].scrollIntoView({ behavior: 'smooth', block: 'start' });
      if (!cards[index].classList.contains('open')) toggleSection(cards[index].querySelector('.section-header'));
    }
  });
});

// ===== PRONUNCIATION CHECK =====
// pronunSentences is defined in the HTML before this script

let currentPronunIndex = 0;
let pronunResults = [];
let pronunRecognition = null;
let isRecording = false;

function initPronun() {
  renderPronunSentence();
  updatePronunNav();
}

function renderPronunSentence() {
  const target = document.getElementById('pronun-target');
  const sentence = pronunSentences[currentPronunIndex];
  const words = sentence.text.split(' ');
  target.innerHTML = words.map((w, i) => `<span class="word" data-index="${i}">${w}</span>`).join(' ');

  const result = document.getElementById('pronun-result');
  result.classList.remove('show', 'good', 'needs-work', 'try-again');
}

function updatePronunNav() {
  document.getElementById('pronun-counter').textContent =
    `${currentPronunIndex + 1} / ${pronunSentences.length}`;
  document.getElementById('pronun-prev').classList.toggle('disabled', currentPronunIndex === 0);
  document.getElementById('pronun-next').classList.toggle('disabled', currentPronunIndex === pronunSentences.length - 1);
}

function changePronunSentence(dir) {
  const newIndex = currentPronunIndex + dir;
  if (newIndex < 0 || newIndex >= pronunSentences.length) return;
  currentPronunIndex = newIndex;
  renderPronunSentence();
  updatePronunNav();
}

function speakPronunSentence() {
  if (window.speechSynthesis.speaking) {
    window.speechSynthesis.cancel();
    return;
  }
  const text = pronunSentences[currentPronunIndex].text;
  const utterance = new SpeechSynthesisUtterance(text);
  utterance.lang = 'en-AU';
  utterance.rate = 0.85;
  const voices = window.speechSynthesis.getVoices();
  const enVoice = voices.find(v => v.lang.startsWith('en-AU')) ||
                  voices.find(v => v.lang.startsWith('en-GB')) ||
                  voices.find(v => v.lang.startsWith('en'));
  if (enVoice) utterance.voice = enVoice;
  window.speechSynthesis.speak(utterance);
}

function togglePronunRecording() {
  if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
    alert('ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯éŸ³å£°èªè­˜ã«å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚Chrome ã‚’ãŠä½¿ã„ãã ã•ã„ã€‚');
    return;
  }

  if (isRecording) {
    stopPronunRecording();
    return;
  }

  const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
  pronunRecognition = new SpeechRecognition();
  pronunRecognition.lang = 'en-AU';
  pronunRecognition.interimResults = false;
  pronunRecognition.maxAlternatives = 3;
  pronunRecognition.continuous = false;

  const btn = document.getElementById('pronun-btn');
  btn.textContent = 'â¹ éŒ²éŸ³ä¸­...';
  btn.classList.add('recording');
  isRecording = true;

  pronunRecognition.onresult = (event) => {
    const results = event.results[0];
    const heard = results[0].transcript;
    const confidence = results[0].confidence;
    const alternatives = [];
    for (let i = 0; i < results.length; i++) {
      alternatives.push(results[i].transcript.toLowerCase());
    }
    evaluatePronunciation(heard, confidence, alternatives);
    stopPronunRecording();
  };

  pronunRecognition.onerror = (event) => {
    stopPronunRecording();
    if (event.error === 'no-speech') {
      alert('éŸ³å£°ãŒæ¤œå‡ºã•ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚ã‚‚ã†å°‘ã—å¤§ããªå£°ã§ã¯ã£ãã‚Šè©±ã—ã¦ã¿ã¦ãã ã•ã„ã€‚');
    } else if (event.error === 'not-allowed') {
      alert('ãƒã‚¤ã‚¯ã®ä½¿ç”¨ãŒè¨±å¯ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã§ãƒã‚¤ã‚¯ã‚’è¨±å¯ã—ã¦ãã ã•ã„ã€‚');
    } else {
      alert('éŸ³å£°èªè­˜ã‚¨ãƒ©ãƒ¼: ' + event.error);
    }
  };

  pronunRecognition.onend = () => {
    stopPronunRecording();
  };

  pronunRecognition.start();
}

function stopPronunRecording() {
  const btn = document.getElementById('pronun-btn');
  btn.textContent = 'ğŸ¤ ã‚‚ã†ä¸€å›';
  btn.classList.remove('recording');
  isRecording = false;
  if (pronunRecognition) {
    try { pronunRecognition.stop(); } catch(e) {}
  }
}

function normalizeText(text) {
  return text.toLowerCase()
    .replace(/[.,!?;:'"()\-]/g, '')
    .replace(/\s+/g, ' ')
    .trim();
}

function evaluatePronunciation(heard, confidence, alternatives) {
  const target = pronunSentences[currentPronunIndex].text;
  const tip = pronunSentences[currentPronunIndex].tip;

  const targetWords = normalizeText(target).split(' ');
  const heardWords = normalizeText(heard).split(' ');

  const allHeardWords = new Set();
  alternatives.forEach(alt => {
    normalizeText(alt).split(' ').forEach(w => allHeardWords.add(w));
  });

  let correctCount = 0;
  const wordElements = document.querySelectorAll('#pronun-target .word');

  targetWords.forEach((targetWord, i) => {
    const el = wordElements[i];
    if (!el) return;

    el.classList.remove('correct', 'wrong', 'missed');

    const targetClean = targetWord.toLowerCase();

    if (heardWords.includes(targetClean) || allHeardWords.has(targetClean)) {
      el.classList.add('correct');
      correctCount++;
    } else {
      const similar = heardWords.some(hw => levenshtein(hw, targetClean) <= 1) ||
                      [...allHeardWords].some(hw => levenshtein(hw, targetClean) <= 1);
      if (similar) {
        el.classList.add('correct');
        correctCount++;
      } else {
        el.classList.add('wrong');
      }
    }
  });

  const score = Math.round((correctCount / targetWords.length) * 100);

  pronunResults[currentPronunIndex] = { score, heard, target };

  const resultEl = document.getElementById('pronun-result');
  const scoreCircle = document.getElementById('pronun-score-circle');
  const scoreLabel = document.getElementById('pronun-score-label');
  const scoreDetail = document.getElementById('pronun-score-detail');
  const heardEl = document.getElementById('pronun-heard');
  const tipsEl = document.getElementById('pronun-tips');

  scoreCircle.textContent = score + '%';
  scoreCircle.classList.remove('high', 'mid', 'low');
  resultEl.classList.remove('good', 'needs-work', 'try-again');

  if (score >= 80) {
    scoreCircle.classList.add('high');
    scoreLabel.textContent = 'ğŸ‰ Great!';
    scoreDetail.textContent = 'ã—ã£ã‹ã‚Šé€šã˜ã‚‹ç™ºéŸ³ã§ã™ï¼';
    resultEl.classList.add('good');
  } else if (score >= 50) {
    scoreCircle.classList.add('mid');
    scoreLabel.textContent = 'ğŸ‘ Almost!';
    scoreDetail.textContent = 'ã‚‚ã†å°‘ã—ï¼èµ¤ã„å˜èªã‚’æ„è­˜ã—ã¦ã¿ã‚ˆã†ã€‚';
    resultEl.classList.add('needs-work');
  } else {
    scoreCircle.classList.add('low');
    scoreLabel.textContent = 'ğŸ’ª Keep trying!';
    scoreDetail.textContent = 'ãŠæ‰‹æœ¬ã‚’è´ã„ã¦ã‹ã‚‰ã‚‚ã†ä¸€å›ãƒãƒ£ãƒ¬ãƒ³ã‚¸ï¼';
    resultEl.classList.add('try-again');
  }

  heardEl.innerHTML = `<strong>ğŸ§ èªè­˜ã•ã‚ŒãŸéŸ³å£°:</strong> "${heard}"`;
  tipsEl.innerHTML = `<li>ğŸ’¡ ${tip}</li>`;

  const wrongWords = [];
  wordElements.forEach((el, i) => {
    if (el.classList.contains('wrong') && targetWords[i]) {
      wrongWords.push(targetWords[i]);
    }
  });
  if (wrongWords.length > 0) {
    tipsEl.innerHTML += `<li>ğŸ”´ èªè­˜ã•ã‚Œãªã‹ã£ãŸå˜èª: <strong>${wrongWords.join(', ')}</strong> â€” ã‚†ã£ãã‚Šã¯ã£ãã‚Šç™ºéŸ³ã—ã¦ã¿ã‚ˆã†</li>`;
  }

  resultEl.classList.add('show');
}

// Simple Levenshtein distance for fuzzy matching
function levenshtein(a, b) {
  if (a.length === 0) return b.length;
  if (b.length === 0) return a.length;
  const matrix = [];
  for (let i = 0; i <= b.length; i++) matrix[i] = [i];
  for (let j = 0; j <= a.length; j++) matrix[0][j] = j;
  for (let i = 1; i <= b.length; i++) {
    for (let j = 1; j <= a.length; j++) {
      if (b.charAt(i - 1) === a.charAt(j - 1)) {
        matrix[i][j] = matrix[i - 1][j - 1];
      } else {
        matrix[i][j] = Math.min(
          matrix[i - 1][j - 1] + 1,
          matrix[i][j - 1] + 1,
          matrix[i - 1][j] + 1
        );
      }
    }
  }
  return matrix[b.length][a.length];
}

document.addEventListener('DOMContentLoaded', initPronun);
</script>
</body>
</html>